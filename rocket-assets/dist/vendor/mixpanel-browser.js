var F={DEBUG:!1,LIB_VERSION:"2.43.0"},D;if(typeof window>"u"){var nt={hostname:""};D={navigator:{userAgent:""},document:{location:nt,referrer:""},screen:{width:0,height:0},location:nt}}else D=window;var xe=Array.prototype,Ut=Function.prototype,ft=Object.prototype,j=xe.slice,pe=ft.toString,ke=ft.hasOwnProperty,S=D.console,C=D.navigator,x=D.document,ae=D.opera,ve=D.screen,q=C.userAgent,Te=Ut.bind,ot=xe.forEach,st=xe.indexOf,at=xe.map,Bt=Array.isArray,Ae={},n={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b={log:function(){if(F.DEBUG&&!n.isUndefined(S)&&S)try{S.log.apply(S,arguments)}catch{n.each(arguments,function(t){S.log(t)})}},warn:function(){if(F.DEBUG&&!n.isUndefined(S)&&S){var e=["Mixpanel warning:"].concat(n.toArray(arguments));try{S.warn.apply(S,e)}catch{n.each(e,function(i){S.warn(i)})}}},error:function(){if(F.DEBUG&&!n.isUndefined(S)&&S){var e=["Mixpanel error:"].concat(n.toArray(arguments));try{S.error.apply(S,e)}catch{n.each(e,function(i){S.error(i)})}}},critical:function(){if(!n.isUndefined(S)&&S){var e=["Mixpanel error:"].concat(n.toArray(arguments));try{S.error.apply(S,e)}catch{n.each(e,function(i){S.error(i)})}}}},Oe=function(e,t){return function(){return arguments[0]="["+t+"] "+arguments[0],e.apply(b,arguments)}},Le=function(e){return{log:Oe(b.log,e),error:Oe(b.error,e),critical:Oe(b.critical,e)}};n.bind=function(e,t){var i,r;if(Te&&e.bind===Te)return Te.apply(e,j.call(arguments,1));if(!n.isFunction(e))throw new TypeError;return i=j.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,i.concat(j.call(arguments)));var o={};o.prototype=e.prototype;var s=new o;o.prototype=null;var a=e.apply(s,i.concat(j.call(arguments)));return Object(a)===a?a:s},r};n.bind_instance_methods=function(e){for(var t in e)typeof e[t]=="function"&&(e[t]=n.bind(e[t],e))};n.each=function(e,t,i){if(e!=null){if(ot&&e.forEach===ot)e.forEach(t,i);else if(e.length===+e.length){for(var r=0,o=e.length;r<o;r++)if(r in e&&t.call(i,e[r],r,e)===Ae)return}else for(var s in e)if(ke.call(e,s)&&t.call(i,e[s],s,e)===Ae)return}};n.escapeHTML=function(e){var t=e;return t&&n.isString(t)&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),t};n.extend=function(e){return n.each(j.call(arguments,1),function(t){for(var i in t)t[i]!==void 0&&(e[i]=t[i])}),e};n.isArray=Bt||function(e){return pe.call(e)==="[object Array]"};n.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch{return!1}};n.isArguments=function(e){return!!(e&&ke.call(e,"callee"))};n.toArray=function(e){return e?e.toArray?e.toArray():n.isArray(e)||n.isArguments(e)?j.call(e):n.values(e):[]};n.map=function(e,t,i){if(at&&e.map===at)return e.map(t,i);var r=[];return n.each(e,function(o){r.push(t.call(i,o))}),r};n.keys=function(e){var t=[];return e===null||n.each(e,function(i,r){t[t.length]=r}),t};n.values=function(e){var t=[];return e===null||n.each(e,function(i){t[t.length]=i}),t};n.include=function(e,t){var i=!1;return e===null?i:st&&e.indexOf===st?e.indexOf(t)!=-1:(n.each(e,function(r){if(i||(i=r===t))return Ae}),i)};n.includes=function(e,t){return e.indexOf(t)!==-1};n.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e};n.isObject=function(e){return e===Object(e)&&!n.isArray(e)};n.isEmptyObject=function(e){if(n.isObject(e)){for(var t in e)if(ke.call(e,t))return!1;return!0}return!1};n.isUndefined=function(e){return e===void 0};n.isString=function(e){return pe.call(e)=="[object String]"};n.isDate=function(e){return pe.call(e)=="[object Date]"};n.isNumber=function(e){return pe.call(e)=="[object Number]"};n.isElement=function(e){return!!(e&&e.nodeType===1)};n.encodeDates=function(e){return n.each(e,function(t,i){n.isDate(t)?e[i]=n.formatDate(t):n.isObject(t)&&(e[i]=n.encodeDates(t))}),e};n.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()};n.formatDate=function(e){function t(i){return i<10?"0"+i:i}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())};n.safewrap=function(e){return function(){try{return e.apply(this,arguments)}catch(t){b.critical("Implementation error. Please turn on debug and contact support@mixpanel.com."),F.DEBUG&&b.critical(t)}}};n.safewrap_class=function(e,t){for(var i=0;i<t.length;i++)e.prototype[t[i]]=n.safewrap(e.prototype[t[i]])};n.safewrap_instance_methods=function(e){for(var t in e)typeof e[t]=="function"&&(e[t]=n.safewrap(e[t]))};n.strip_empty_properties=function(e){var t={};return n.each(e,function(i,r){n.isString(i)&&i.length>0&&(t[r]=i)}),t};n.truncate=function(e,t){var i;return typeof e=="string"?i=e.slice(0,t):n.isArray(e)?(i=[],n.each(e,function(r){i.push(n.truncate(r,t))})):n.isObject(e)?(i={},n.each(e,function(r,o){i[o]=n.truncate(r,t)})):i=e,i};n.JSONEncode=function(){return function(e){var t=e,i=function(o){var s=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return s.lastIndex=0,s.test(o)?'"'+o.replace(s,function(_){var u=a[_];return typeof u=="string"?u:"\\u"+("0000"+_.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+o+'"'},r=function(o,s){var a="",_="    ",u=0,l="",d="",h=0,f=a,v=[],g=s[o];switch(g&&typeof g=="object"&&typeof g.toJSON=="function"&&(g=g.toJSON(o)),typeof g){case"string":return i(g);case"number":return isFinite(g)?String(g):"null";case"boolean":case"null":return String(g);case"object":if(!g)return"null";if(a+=_,v=[],pe.apply(g)==="[object Array]"){for(h=g.length,u=0;u<h;u+=1)v[u]=r(u,g)||"null";return d=v.length===0?"[]":a?`[
`+a+v.join(`,
`+a)+`
`+f+"]":"["+v.join(",")+"]",a=f,d}for(l in g)ke.call(g,l)&&(d=r(l,g),d&&v.push(i(l)+(a?": ":":")+d));return d=v.length===0?"{}":a?"{"+v.join(",")+f+"}":"{"+v.join(",")+"}",a=f,d}};return r("",{"":t})}}();n.JSONDecode=function(){var e,t,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},r,o=function(v){var g=new SyntaxError(v);throw g.at=e,g.text=r,g},s=function(v){return v&&v!==t&&o("Expected '"+v+"' instead of '"+t+"'"),t=r.charAt(e),e+=1,t},a=function(){var v,g="";for(t==="-"&&(g="-",s("-"));t>="0"&&t<="9";)g+=t,s();if(t===".")for(g+=".";s()&&t>="0"&&t<="9";)g+=t;if(t==="e"||t==="E")for(g+=t,s(),(t==="-"||t==="+")&&(g+=t,s());t>="0"&&t<="9";)g+=t,s();if(v=+g,!isFinite(v))o("Bad number");else return v},_=function(){var v,g,E="",m;if(t==='"')for(;s();){if(t==='"')return s(),E;if(t==="\\")if(s(),t==="u"){for(m=0,g=0;g<4&&(v=parseInt(s(),16),!!isFinite(v));g+=1)m=m*16+v;E+=String.fromCharCode(m)}else if(typeof i[t]=="string")E+=i[t];else break;else E+=t}o("Bad string")},u=function(){for(;t&&t<=" ";)s()},l=function(){switch(t){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}o('Unexpected "'+t+'"')},d,h=function(){var v=[];if(t==="["){if(s("["),u(),t==="]")return s("]"),v;for(;t;){if(v.push(d()),u(),t==="]")return s("]"),v;s(","),u()}}o("Bad array")},f=function(){var v,g={};if(t==="{"){if(s("{"),u(),t==="}")return s("}"),g;for(;t;){if(v=_(),u(),s(":"),Object.hasOwnProperty.call(g,v)&&o('Duplicate key "'+v+'"'),g[v]=d(),u(),t==="}")return s("}"),g;s(","),u()}}o("Bad object")};return d=function(){switch(u(),t){case"{":return f();case"[":return h();case'"':return _();case"-":return a();default:return t>="0"&&t<="9"?a():l()}},function(v){var g;return r=v,e=0,t=" ",g=d(),u(),t&&o("Syntax error"),g}}();n.base64Encode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i,r,o,s,a,_,u,l,d=0,h=0,f="",v=[];if(!e)return e;e=n.utf8Encode(e);do i=e.charCodeAt(d++),r=e.charCodeAt(d++),o=e.charCodeAt(d++),l=i<<16|r<<8|o,s=l>>18&63,a=l>>12&63,_=l>>6&63,u=l&63,v[h++]=t.charAt(s)+t.charAt(a)+t.charAt(_)+t.charAt(u);while(d<e.length);switch(f=v.join(""),e.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"=";break}return f};n.utf8Encode=function(e){e=(e+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var t="",i,r,o=0,s;for(i=r=0,o=e.length,s=0;s<o;s++){var a=e.charCodeAt(s),_=null;a<128?r++:a>127&&a<2048?_=String.fromCharCode(a>>6|192,a&63|128):_=String.fromCharCode(a>>12|224,a>>6&63|128,a&63|128),_!==null&&(r>i&&(t+=e.substring(i,r)),t+=_,i=r=s+1)}return r>i&&(t+=e.substring(i,e.length)),t};n.UUID=function(){var e=function(){for(var r=1*new Date,o=0;r==1*new Date;)o++;return r.toString(16)+o.toString(16)},t=function(){return Math.random().toString(16).replace(".","")},i=function(){var r=q,o,s,a=[],_=0;function u(l,d){var h,f=0;for(h=0;h<d.length;h++)f|=a[h]<<h*8;return l^f}for(o=0;o<r.length;o++)s=r.charCodeAt(o),a.unshift(s&255),a.length>=4&&(_=u(_,a),a=[]);return a.length>0&&(_=u(_,a)),_.toString(16)};return function(){var r=(ve.height*ve.width).toString(16);return e()+"-"+t()+"-"+i()+"-"+r+"-"+e()}}();var ct=["ahrefsbot","baiduspider","bingbot","bingpreview","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];n.isBlockedUA=function(e){var t;for(e=e.toLowerCase(),t=0;t<ct.length;t++)if(e.indexOf(ct[t])!==-1)return!0;return!1};n.HTTPBuildQuery=function(e,t){var i,r,o=[];return n.isUndefined(t)&&(t="&"),n.each(e,function(s,a){i=encodeURIComponent(s.toString()),r=encodeURIComponent(a),o[o.length]=r+"="+i}),o.join(t)};n.getQueryParam=function(e,t){t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+t+"=([^&#]*)",r=new RegExp(i),o=r.exec(e);if(o===null||o&&typeof o[1]!="string"&&o[1].length)return"";var s=o[1];try{s=decodeURIComponent(s)}catch{b.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")};n.cookie={get:function(e){for(var t=e+"=",i=x.cookie.split(";"),r=0;r<i.length;r++){for(var o=i[r];o.charAt(0)==" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return decodeURIComponent(o.substring(t.length,o.length))}return null},parse:function(e){var t;try{t=n.JSONDecode(n.cookie.get(e))||{}}catch{}return t},set_seconds:function(e,t,i,r,o,s,a){var _="",u="",l="";if(a)_="; domain="+a;else if(r){var d=_t(x.location.hostname);_=d?"; domain=."+d:""}if(i){var h=new Date;h.setTime(h.getTime()+i*1e3),u="; expires="+h.toGMTString()}s&&(o=!0,l="; SameSite=None"),o&&(l+="; secure"),x.cookie=e+"="+encodeURIComponent(t)+u+"; path=/"+_+l},set:function(e,t,i,r,o,s,a){var _="",u="",l="";if(a)_="; domain="+a;else if(r){var d=_t(x.location.hostname);_=d?"; domain=."+d:""}if(i){var h=new Date;h.setTime(h.getTime()+i*24*60*60*1e3),u="; expires="+h.toGMTString()}s&&(o=!0,l="; SameSite=None"),o&&(l+="; secure");var f=e+"="+encodeURIComponent(t)+u+"; path=/"+_+l;return x.cookie=f,f},remove:function(e,t,i){n.cookie.set(e,"",-1,t,!1,!1,i)}};var Se=null,Me=function(e,t){if(Se!==null&&!t)return Se;var i=!0;try{e=e||window.localStorage;var r="__mplss_"+Ye(8),o="xyz";e.setItem(r,o),e.getItem(r)!==o&&(i=!1),e.removeItem(r)}catch{i=!1}return Se=i,i};n.localStorage={is_supported:function(e){var t=Me(null,e);return t||b.error("localStorage unsupported; falling back to cookie store"),t},error:function(e){b.error("localStorage error: "+e)},get:function(e){try{return window.localStorage.getItem(e)}catch(t){n.localStorage.error(t)}return null},parse:function(e){try{return n.JSONDecode(n.localStorage.get(e))||{}}catch{}return null},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(i){n.localStorage.error(i)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(t){n.localStorage.error(t)}}};n.register_event=function(){var e=function(r,o,s,a,_){if(!r){b.error("No valid element provided to register_event");return}if(r.addEventListener&&!a)r.addEventListener(o,s,!!_);else{var u="on"+o,l=r[u];r[u]=t(r,s,l)}};function t(r,o,s){var a=function(_){if(_=_||i(window.event),!!_){var u=!0,l,d;return n.isFunction(s)&&(l=s(_)),d=o.call(r,_),(l===!1||d===!1)&&(u=!1),u}};return a}function i(r){return r&&(r.preventDefault=i.preventDefault,r.stopPropagation=i.stopPropagation),r}return i.preventDefault=function(){this.returnValue=!1},i.stopPropagation=function(){this.cancelBubble=!0},e}();var Ft=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');n.dom_query=function(){function e(o){return o.all?o.all:o.getElementsByTagName("*")}var t=/[\t\r\n]/g;function i(o,s){var a=" "+s+" ";return(" "+o.className+" ").replace(t," ").indexOf(a)>=0}function r(o){if(!x.getElementsByTagName)return[];var s=o.split(" "),a,_,u,l,d,h,f,v,g,E,m=[x];for(h=0;h<s.length;h++){if(a=s[h].replace(/^\s+/,"").replace(/\s+$/,""),a.indexOf("#")>-1){_=a.split("#"),u=_[0];var N=_[1],T=x.getElementById(N);if(!T||u&&T.nodeName.toLowerCase()!=u)return[];m=[T];continue}if(a.indexOf(".")>-1){_=a.split("."),u=_[0];var G=_[1];for(u||(u="*"),l=[],d=0,f=0;f<m.length;f++)for(u=="*"?g=e(m[f]):g=m[f].getElementsByTagName(u),v=0;v<g.length;v++)l[d++]=g[v];for(m=[],E=0,f=0;f<l.length;f++)l[f].className&&n.isString(l[f].className)&&i(l[f],G)&&(m[E++]=l[f]);continue}var K=a.match(Ft);if(K){u=K[1];var B=K[2],V=K[3],P=K[4];for(u||(u="*"),l=[],d=0,f=0;f<m.length;f++)for(u=="*"?g=e(m[f]):g=m[f].getElementsByTagName(u),v=0;v<g.length;v++)l[d++]=g[v];m=[],E=0;var A;switch(V){case"=":A=function(O){return O.getAttribute(B)==P};break;case"~":A=function(O){return O.getAttribute(B).match(new RegExp("\\b"+P+"\\b"))};break;case"|":A=function(O){return O.getAttribute(B).match(new RegExp("^"+P+"-?"))};break;case"^":A=function(O){return O.getAttribute(B).indexOf(P)===0};break;case"$":A=function(O){return O.getAttribute(B).lastIndexOf(P)==O.getAttribute(B).length-P.length};break;case"*":A=function(O){return O.getAttribute(B).indexOf(P)>-1};break;default:A=function(O){return O.getAttribute(B)}}for(m=[],E=0,f=0;f<l.length;f++)A(l[f])&&(m[E++]=l[f]);continue}for(u=a,l=[],d=0,f=0;f<m.length;f++)for(g=m[f].getElementsByTagName(u),v=0;v<g.length;v++)l[d++]=g[v];m=l}return m}return function(o){return n.isElement(o)?[o]:n.isObject(o)&&!n.isUndefined(o.length)?o:r.call(this,o)}}();n.info={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",i={};return n.each(e,function(r){t=n.getQueryParam(x.URL,r),t.length&&(i[r]=t)}),i},searchEngine:function(e){return e.search("https?://(.*)google.([^/?]*)")===0?"google":e.search("https?://(.*)bing.com")===0?"bing":e.search("https?://(.*)yahoo.com")===0?"yahoo":e.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(e){var t=n.info.searchEngine(e),i=t!="yahoo"?"q":"p",r={};if(t!==null){r.$search_engine=t;var o=n.getQueryParam(e,i);o.length&&(r.mp_keyword=o)}return r},browser:function(e,t,i){return t=t||"",i||n.includes(e," OPR/")?n.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":n.includes(e,"IEMobile")||n.includes(e,"WPDesktop")?"Internet Explorer Mobile":n.includes(e,"SamsungBrowser/")?"Samsung Internet":n.includes(e,"Edge")||n.includes(e,"Edg/")?"Microsoft Edge":n.includes(e,"FBIOS")?"Facebook Mobile":n.includes(e,"Chrome")?"Chrome":n.includes(e,"CriOS")?"Chrome iOS":n.includes(e,"UCWEB")||n.includes(e,"UCBrowser")?"UC Browser":n.includes(e,"FxiOS")?"Firefox iOS":n.includes(t,"Apple")?n.includes(e,"Mobile")?"Mobile Safari":"Safari":n.includes(e,"Android")?"Android Mobile":n.includes(e,"Konqueror")?"Konqueror":n.includes(e,"Firefox")?"Firefox":n.includes(e,"MSIE")||n.includes(e,"Trident/")?"Internet Explorer":n.includes(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,i){var r=n.info.browser(e,t,i),o={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},s=o[r];if(s===void 0)return null;var a=e.match(s);return a?parseFloat(a[a.length-2]):null},os:function(){var e=q;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"Chrome OS":""},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},properties:function(){return n.extend(n.strip_empty_properties({$os:n.info.os(),$browser:n.info.browser(q,C.vendor,ae),$referrer:x.referrer,$referring_domain:n.info.referringDomain(x.referrer),$device:n.info.device(q)}),{$current_url:D.location.href,$browser_version:n.info.browserVersion(q,C.vendor,ae),$screen_height:ve.height,$screen_width:ve.width,mp_lib:"web",$lib_version:F.LIB_VERSION,$insert_id:Ye(),time:n.timestamp()/1e3})},people_properties:function(){return n.extend(n.strip_empty_properties({$os:n.info.os(),$browser:n.info.browser(q,C.vendor,ae)}),{$browser_version:n.info.browserVersion(q,C.vendor,ae)})},pageviewInfo:function(e){return n.strip_empty_properties({mp_page:e,mp_referrer:x.referrer,mp_browser:n.info.browser(q,C.vendor,ae),mp_platform:n.info.os()})}};var Ye=function(e){var t=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return e?t.substring(0,e):t},Ct=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,Ht=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,_t=function(e){var t=Ht,i=e.split("."),r=i[i.length-1];(r.length>4||r==="com"||r==="org")&&(t=Ct);var o=e.match(t);return o?o[0]:""},me=null,ye=null;typeof JSON<"u"&&(me=JSON.stringify,ye=JSON.parse);me=me||n.JSONEncode;ye=ye||n.JSONDecode;n.toArray=n.toArray;n.isObject=n.isObject;n.JSONEncode=n.JSONEncode;n.JSONDecode=n.JSONDecode;n.isBlockedUA=n.isBlockedUA;n.isEmptyObject=n.isEmptyObject;n.info=n.info;n.info.device=n.info.device;n.info.browser=n.info.browser;n.info.browserVersion=n.info.browserVersion;n.info.properties=n.info.properties;var L=function(){};L.prototype.create_properties=function(){};L.prototype.event_handler=function(){};L.prototype.after_track_handler=function(){};L.prototype.init=function(e){return this.mp=e,this};L.prototype.track=function(e,t,i,r){var o=this,s=n.dom_query(e);if(s.length===0){b.error("The DOM query ("+e+") returned 0 elements");return}return n.each(s,function(a){n.register_event(a,this.override_event,function(_){var u={},l=o.create_properties(i,this),d=o.mp.get_config("track_links_timeout");o.event_handler(_,this,u),window.setTimeout(o.track_callback(r,l,u,!0),d),o.mp.track(t,l,o.track_callback(r,l,u))})},this),!0};L.prototype.track_callback=function(e,t,i,r){r=r||!1;var o=this;return function(){i.callback_fired||(i.callback_fired=!0,!(e&&e(r,t)===!1)&&o.after_track_handler(t,i,r))}};L.prototype.create_properties=function(e,t){var i;return typeof e=="function"?i=e(t):i=n.extend({},e),i};var ne=function(){this.override_event="click"};n.inherit(ne,L);ne.prototype.create_properties=function(e,t){var i=ne.superclass.create_properties.apply(this,arguments);return t.href&&(i.url=t.href),i};ne.prototype.event_handler=function(e,t,i){i.new_tab=e.which===2||e.metaKey||e.ctrlKey||t.target==="_blank",i.href=t.href,i.new_tab||e.preventDefault()};ne.prototype.after_track_handler=function(e,t){t.new_tab||setTimeout(function(){window.location=t.href},0)};var Ee=function(){this.override_event="submit"};n.inherit(Ee,L);Ee.prototype.event_handler=function(e,t,i){i.element=t,e.preventDefault()};Ee.prototype.after_track_handler=function(e,t){setTimeout(function(){t.element.submit()},0)};var $t=Le("lock"),ht=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.pollIntervalMS=t.pollIntervalMS||100,this.timeoutMS=t.timeoutMS||2e3};ht.prototype.withLock=function(e,t,i){!i&&typeof t!="function"&&(i=t,t=null);var r=i||new Date().getTime()+"|"+Math.random(),o=new Date().getTime(),s=this.storageKey,a=this.pollIntervalMS,_=this.timeoutMS,u=this.storage,l=s+":X",d=s+":Y",h=s+":Z",f=function(T){t&&t(T)},v=function(T){if(new Date().getTime()-o>_){$t.error("Timeout waiting for mutex on "+s+"; clearing lock. ["+r+"]"),u.removeItem(h),u.removeItem(d),m();return}setTimeout(function(){try{T()}catch(G){f(G)}},a*(Math.random()+.1))},g=function(T,G){T()?G():v(function(){g(T,G)})},E=function(){var T=u.getItem(d);if(T&&T!==r)return!1;if(u.setItem(d,r),u.getItem(d)===r)return!0;if(!Me(u,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},m=function(){u.setItem(l,r),g(E,function(){if(u.getItem(l)===r){N();return}v(function(){if(u.getItem(d)!==r){m();return}g(function(){return!u.getItem(h)},N)})})},N=function(){u.setItem(h,"1");try{e()}finally{u.removeItem(h),u.getItem(d)===r&&u.removeItem(d),u.getItem(l)===r&&u.removeItem(l)}};try{if(Me(u,!0))m();else throw new Error("localStorage support check failed")}catch(T){f(T)}};var H=Le("batch"),J=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.lock=new ht(e,{storage:this.storage}),this.pid=t.pid||null,this.memQueue=[]};J.prototype.enqueue=function(e,t,i){var r={id:Ye(),flushAfter:new Date().getTime()+t*2,payload:e};this.lock.withLock(n.bind(function(){var s;try{var a=this.readFromStorage();a.push(r),s=this.saveToStorage(a),s&&this.memQueue.push(r)}catch{H.error("Error enqueueing item",e),s=!1}i&&i(s)},this),function(s){H.error("Error acquiring storage lock",s),i&&i(!1)},this.pid)};J.prototype.fillBatch=function(e){var t=this.memQueue.slice(0,e);if(t.length<e){var i=this.readFromStorage();if(i.length){var r={};n.each(t,function(a){r[a.id]=!0});for(var o=0;o<i.length;o++){var s=i[o];if(new Date().getTime()>s.flushAfter&&!r[s.id]&&(s.orphaned=!0,t.push(s),t.length>=e))break}}}return t};var ut=function(e,t){var i=[];return n.each(e,function(r){r.id&&!t[r.id]&&i.push(r)}),i};J.prototype.removeItemsByID=function(e,t){var i={};n.each(e,function(r){i[r]=!0}),this.memQueue=ut(this.memQueue,i),this.lock.withLock(n.bind(function(){var o;try{var s=this.readFromStorage();s=ut(s,i),o=this.saveToStorage(s)}catch{H.error("Error removing items",e),o=!1}t&&t(o)},this),function(o){H.error("Error acquiring storage lock",o),t&&t(!1)},this.pid)};var lt=function(e,t){var i=[];return n.each(e,function(r){var o=r.id;if(o in t){var s=t[o];s!==null&&(r.payload=s,i.push(r))}else i.push(r)}),i};J.prototype.updatePayloads=function(e,t){this.memQueue=lt(this.memQueue,e),this.lock.withLock(n.bind(function(){var r;try{var o=this.readFromStorage();o=lt(o,e),r=this.saveToStorage(o)}catch{H.error("Error updating items",e),r=!1}t&&t(r)},this),function(r){H.error("Error acquiring storage lock",r),t&&t(!1)},this.pid)};J.prototype.readFromStorage=function(){var e;try{e=this.storage.getItem(this.storageKey),e&&(e=ye(e),n.isArray(e)||(H.error("Invalid storage entry:",e),e=null))}catch(t){H.error("Error retrieving queue",t),e=null}return e||[]};J.prototype.saveToStorage=function(e){try{return this.storage.setItem(this.storageKey,me(e)),!0}catch(t){return H.error("Error saving queue",t),!1}};J.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var Lt=10*60*1e3,z=Le("batch"),Y=function(e,t){this.queue=new J(e,{storage:t.storage}),this.libConfig=t.libConfig,this.sendRequest=t.sendRequestFunc,this.beforeSendHook=t.beforeSendHook,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart};Y.prototype.enqueue=function(e,t){this.queue.enqueue(e,this.flushInterval,t)};Y.prototype.start=function(){this.stopped=!1,this.flush()};Y.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)};Y.prototype.clear=function(){this.queue.clear()};Y.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size};Y.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)};Y.prototype.scheduleFlush=function(e){this.flushInterval=e,this.stopped||(this.timeoutID=setTimeout(n.bind(this.flush,this),this.flushInterval))};Y.prototype.flush=function(e){try{if(this.requestInProgress){z.log("Flush: Request already in progress");return}e=e||{};var t=this.libConfig.batch_request_timeout_ms,i=new Date().getTime(),r=this.batchSize,o=this.queue.fillBatch(r),s=[],a={};if(n.each(o,function(l){var d=l.payload;this.beforeSendHook&&!l.orphaned&&(d=this.beforeSendHook(d)),d&&s.push(d),a[l.id]=d},this),s.length<1){this.resetFlush();return}this.requestInProgress=!0;var _=n.bind(function(l){this.requestInProgress=!1;try{var d=!1;if(e.unloading)this.queue.updatePayloads(a);else if(n.isObject(l)&&l.error==="timeout"&&new Date().getTime()-i>=t)z.error("Network timeout; retrying"),this.flush();else if(n.isObject(l)&&l.xhr_req&&(l.xhr_req.status>=500||l.xhr_req.status===429||l.error==="timeout")){var h=this.flushInterval*2,f=l.xhr_req.responseHeaders;if(f){var v=f["Retry-After"];v&&(h=parseInt(v,10)*1e3||h)}h=Math.min(Lt,h),z.error("Error; retry in "+h+" ms"),this.scheduleFlush(h)}else if(n.isObject(l)&&l.xhr_req&&l.xhr_req.status===413)if(o.length>1){var g=Math.max(1,Math.floor(r/2));this.batchSize=Math.min(this.batchSize,g,o.length-1),z.error("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else z.error("Single-event request too large; dropping",o),this.resetBatchSize(),d=!0;else d=!0;d&&this.queue.removeItemsByID(n.map(o,function(E){return E.id}),n.bind(this.flush,this))}catch(E){z.error("Error handling API response",E),this.resetFlush()}},this),u={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:t};e.unloading&&(u.transport="sendBeacon"),z.log("MIXPANEL REQUEST:",s),this.sendRequest(s,u,_)}catch(l){z.error("Error flushing request queue",l),this.resetFlush()}};var Yt="__mp_opt_in_out_";function Gt(e,t){vt(!0,e,t)}function Kt(e,t){vt(!1,e,t)}function zt(e,t){return gt(e,t)==="1"}function dt(e,t){if(Xt(t))return b.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var i=gt(e,t)==="0";return i&&b.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),i}function te(e){return ze(e,function(t){return this.get_config(t)})}function Q(e){return ze(e,function(t){return this._get_config(t)})}function se(e){return ze(e,function(t){return this._get_config(t)})}function jt(e,t){t=t||{},Ge(t).remove(Ke(e,t),!!t.crossSubdomainCookie,t.cookieDomain)}function Ge(e){return e=e||{},e.persistenceType==="localStorage"?n.localStorage:n.cookie}function Ke(e,t){return t=t||{},(t.persistencePrefix||Yt)+e}function gt(e,t){return Ge(t).get(Ke(e,t))}function Xt(e){if(e&&e.ignoreDnt)return!1;var t=e&&e.window||D,i=t.navigator||{},r=!1;return n.each([i.doNotTrack,i.msDoNotTrack,t.doNotTrack],function(o){n.includes([!0,1,"1","yes"],o)&&(r=!0)}),r}function vt(e,t,i){if(!n.isString(t)||!t.length){b.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token");return}i=i||{},Ge(i).set(Ke(t,i),e?1:0,n.isNumber(i.cookieExpiration)?i.cookieExpiration:null,!!i.crossSubdomainCookie,!!i.secureCookie,!!i.crossSiteCookie,i.cookieDomain),i.track&&e&&i.track(i.trackEventName||"$opt_in",i.trackProperties,{send_immediately:!0})}function ze(e,t){return function(){var i=!1;try{var r=t.call(this,"token"),o=t.call(this,"ignore_dnt"),s=t.call(this,"opt_out_tracking_persistence_type"),a=t.call(this,"opt_out_tracking_cookie_prefix"),_=t.call(this,"window");r&&(i=dt(r,{ignoreDnt:o,persistenceType:s,persistencePrefix:a,window:_}))}catch(l){b.error("Unexpected error when checking tracking opt-out status: "+l)}if(!i)return e.apply(this,arguments);var u=arguments[arguments.length-1];typeof u=="function"&&u(0)}}var X="$set",oe="$set_once",U="$unset",Z="$add",$="$append",ee="$union",W="$remove",Wt="$delete",mt={set_action:function(e,t){var i={},r={};return n.isObject(e)?n.each(e,function(o,s){this._is_reserved_property(s)||(r[s]=o)},this):r[e]=t,i[X]=r,i},unset_action:function(e){var t={},i=[];return n.isArray(e)||(e=[e]),n.each(e,function(r){this._is_reserved_property(r)||i.push(r)},this),t[U]=i,t},set_once_action:function(e,t){var i={},r={};return n.isObject(e)?n.each(e,function(o,s){this._is_reserved_property(s)||(r[s]=o)},this):r[e]=t,i[oe]=r,i},union_action:function(e,t){var i={},r={};return n.isObject(e)?n.each(e,function(o,s){this._is_reserved_property(s)||(r[s]=n.isArray(o)?o:[o])},this):r[e]=n.isArray(t)?t:[t],i[ee]=r,i},append_action:function(e,t){var i={},r={};return n.isObject(e)?n.each(e,function(o,s){this._is_reserved_property(s)||(r[s]=o)},this):r[e]=t,i[$]=r,i},remove_action:function(e,t){var i={},r={};return n.isObject(e)?n.each(e,function(o,s){this._is_reserved_property(s)||(r[s]=o)},this):r[e]=t,i[W]=r,i},delete_action:function(){var e={};return e[Wt]="",e}},k=function(){};n.extend(k.prototype,mt);k.prototype._init=function(e,t,i){this._mixpanel=e,this._group_key=t,this._group_id=i};k.prototype.set=se(function(e,t,i){var r=this.set_action(e,t);return n.isObject(e)&&(i=t),this._send_request(r,i)});k.prototype.set_once=se(function(e,t,i){var r=this.set_once_action(e,t);return n.isObject(e)&&(i=t),this._send_request(r,i)});k.prototype.unset=se(function(e,t){var i=this.unset_action(e);return this._send_request(i,t)});k.prototype.union=se(function(e,t,i){n.isObject(e)&&(i=t);var r=this.union_action(e,t);return this._send_request(r,i)});k.prototype.delete=se(function(e){var t=this.delete_action();return this._send_request(t,e)});k.prototype.remove=se(function(e,t,i){var r=this.remove_action(e,t);return this._send_request(r,i)});k.prototype._send_request=function(e,t){e.$group_key=this._group_key,e.$group_id=this._group_id,e.$token=this._get_config("token");var i=n.encodeDates(e);return this._mixpanel._track_or_batch({type:"groups",data:i,endpoint:this._get_config("api_host")+"/groups/",batcher:this._mixpanel.request_batchers.groups},t)};k.prototype._is_reserved_property=function(e){return e==="$group_key"||e==="$group_id"};k.prototype._get_config=function(e){return this._mixpanel.get_config(e)};k.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id};k.prototype.remove=k.prototype.remove;k.prototype.set=k.prototype.set;k.prototype.set_once=k.prototype.set_once;k.prototype.union=k.prototype.union;k.prototype.unset=k.prototype.unset;k.prototype.toString=k.prototype.toString;var je="__mps",Xe="__mpso",We="__mpus",Je="__mpa",Qe="__mpap",Ve="__mpr",Ze="__mpu",yt="$people_distinct_id",be="__alias",_e="__cmpns",ue="__timers",Jt=[je,Xe,We,Je,Qe,Ve,Ze,yt,be,_e,ue],w=function(e){this.props={},this.campaign_params_saved=!1,e.persistence_name?this.name="mp_"+e.persistence_name:this.name="mp_"+e.token+"_mixpanel";var t=e.persistence;t!=="cookie"&&t!=="localStorage"&&(b.critical("Unknown persistence type "+t+"; falling back to cookie"),t=e.persistence="cookie"),t==="localStorage"&&n.localStorage.is_supported()?this.storage=n.localStorage:this.storage=n.cookie,this.load(),this.update_config(e),this.upgrade(e),this.save()};w.prototype.properties=function(){var e={};return n.each(this.props,function(t,i){n.include(Jt,i)||(e[i]=t)}),e};w.prototype.load=function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=n.extend({},e))}};w.prototype.upgrade=function(e){var t=e.upgrade,i,r;t&&(i="mp_super_properties",typeof t=="string"&&(i=t),r=this.storage.parse(i),this.storage.remove(i),this.storage.remove(i,!0),r&&(this.props=n.extend(this.props,r.all,r.events))),!e.cookie_name&&e.name!=="mixpanel"&&(i="mp_"+e.token+"_"+e.name,r=this.storage.parse(i),r&&(this.storage.remove(i),this.storage.remove(i,!0),this.register_once(r))),this.storage===n.localStorage&&(r=n.cookie.parse(this.name),n.cookie.remove(this.name),n.cookie.remove(this.name,!0),r&&this.register_once(r))};w.prototype.save=function(){this.disabled||(this._expire_notification_campaigns(),this.storage.set(this.name,n.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain))};w.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)};w.prototype.clear=function(){this.remove(),this.props={}};w.prototype.register_once=function(e,t,i){return n.isObject(e)?(typeof t>"u"&&(t="None"),this.expire_days=typeof i>"u"?this.default_expiry:i,n.each(e,function(r,o){(!this.props.hasOwnProperty(o)||this.props[o]===t)&&(this.props[o]=r)},this),this.save(),!0):!1};w.prototype.register=function(e,t){return n.isObject(e)?(this.expire_days=typeof t>"u"?this.default_expiry:t,n.extend(this.props,e),this.save(),!0):!1};w.prototype.unregister=function(e){e in this.props&&(delete this.props[e],this.save())};w.prototype._expire_notification_campaigns=n.safewrap(function(){var e=this.props[_e],t=F.DEBUG?60*1e3:60*60*1e3;if(!!e){for(var i in e)1*new Date-e[i]>t&&delete e[i];n.isEmptyObject(e)&&delete this.props[_e]}});w.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(n.info.campaignParams()),this.campaign_params_saved=!0)};w.prototype.update_search_keyword=function(e){this.register(n.info.searchInfo(e))};w.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:n.info.referringDomain(e)||"$direct"},"")};w.prototype.get_referrer_info=function(){return n.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};w.prototype.safe_merge=function(e){return n.each(this.props,function(t,i){i in e||(e[i]=t)}),e};w.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cookie_domain(e.cookie_domain),this.set_cross_site(e.cross_site_cookie),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)};w.prototype.set_disabled=function(e){this.disabled=e,this.disabled?this.remove():this.save()};w.prototype.set_cookie_domain=function(e){e!==this.cookie_domain&&(this.remove(),this.cookie_domain=e,this.save())};w.prototype.set_cross_site=function(e){e!==this.cross_site&&(this.cross_site=e,this.remove(),this.save())};w.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())};w.prototype.get_cross_subdomain=function(){return this.cross_subdomain};w.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())};w.prototype._add_to_people_queue=function(e,t){var i=this._get_queue_key(e),r=t[e],o=this._get_or_create_queue(X),s=this._get_or_create_queue(oe),a=this._get_or_create_queue(U),_=this._get_or_create_queue(Z),u=this._get_or_create_queue(ee),l=this._get_or_create_queue(W,[]),d=this._get_or_create_queue($,[]);i===je?(n.extend(o,r),this._pop_from_people_queue(Z,r),this._pop_from_people_queue(ee,r),this._pop_from_people_queue(U,r)):i===Xe?(n.each(r,function(h,f){f in s||(s[f]=h)}),this._pop_from_people_queue(U,r)):i===We?n.each(r,function(h){n.each([o,s,_,u],function(f){h in f&&delete f[h]}),n.each(d,function(f){h in f&&delete f[h]}),a[h]=!0}):i===Je?(n.each(r,function(h,f){f in o?o[f]+=h:(f in _||(_[f]=0),_[f]+=h)},this),this._pop_from_people_queue(U,r)):i===Ze?(n.each(r,function(h,f){n.isArray(h)&&(f in u||(u[f]=[]),u[f]=u[f].concat(h))}),this._pop_from_people_queue(U,r)):i===Ve?(l.push(r),this._pop_from_people_queue($,r)):i===Qe&&(d.push(r),this._pop_from_people_queue(U,r)),b.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),b.log(t),this.save()};w.prototype._pop_from_people_queue=function(e,t){var i=this._get_queue(e);n.isUndefined(i)||(n.each(t,function(r,o){e===$||e===W?n.each(i,function(s){s[o]===r&&delete s[o]}):delete i[o]},this),this.save())};w.prototype._get_queue_key=function(e){if(e===X)return je;if(e===oe)return Xe;if(e===U)return We;if(e===Z)return Je;if(e===$)return Qe;if(e===W)return Ve;if(e===ee)return Ze;b.error("Invalid queue:",e)};w.prototype._get_queue=function(e){return this.props[this._get_queue_key(e)]};w.prototype._get_or_create_queue=function(e,t){var i=this._get_queue_key(e);return t=n.isUndefined(t)?{}:t,this.props[i]||(this.props[i]=t)};w.prototype.set_event_timer=function(e,t){var i=this.props[ue]||{};i[e]=t,this.props[ue]=i,this.save()};w.prototype.remove_event_timer=function(e){var t=this.props[ue]||{},i=t[e];return n.isUndefined(i)||(delete this.props[ue][e],this.save()),i};var Qt="operator",Vt="property",Zt="window",Ne="unit",ce="value",ei="hour",ti="day",ii="week",ri="month",ni="event",oi="literal",bt="and",wt="or",xt="in",De="not in",kt="+",Pe="-",Re="*",qe="/",Ue="%",Be="==",Fe="!=",fe=">",he="<",de=">=",ge="<=",Et="boolean",It="datetime",Tt="list",Ot="number",St="string",Nt="not",At="defined",Ce="not defined",si="now";function He(e){if(e===null)return null;switch(typeof e){case"object":return n.isDate(e)&&e.getTime()>=0?e.getTime():null;case"boolean":return Number(e);case"number":return e;case"string":return e=Number(e),isNaN(e)?0:e}return null}function ai(e,t){if(!e.operator||e.operator!==Ot||!e.children||e.children.length!==1)throw"Invalid cast operator: number "+e;return He(I(e.children[0],t))}function le(e){if(e===null)return!1;switch(typeof e){case"boolean":return e;case"number":return e!==0;case"string":return e.length>0;case"object":return!!(n.isArray(e)&&e.length>0||n.isDate(e)&&e.getTime()>0||n.isObject(e)&&!n.isEmptyObject(e))}return!1}function ci(e,t){if(!e.operator||e.operator!==Et||!e.children||e.children.length!==1)throw"Invalid cast operator: boolean "+e;return le(I(e.children[0],t))}function _i(e,t){if(!e.operator||e.operator!==It||!e.children||e.children.length!==1)throw"Invalid cast operator: datetime "+e;var i=I(e.children[0],t);if(i===null)return null;switch(typeof i){case"number":case"string":var r=new Date(i);return isNaN(r.getTime())?null:r;case"object":if(n.isDate(i))return i}return null}function ui(e,t){if(!e.operator||e.operator!==Tt||!e.children||e.children.length!==1)throw"Invalid cast operator: list "+e;var i=I(e.children[0],t);return i===null?null:n.isArray(i)?i:null}function li(e,t){if(!e.operator||e.operator!==St||!e.children||e.children.length!==1)throw"Invalid cast operator: string "+e;var i=I(e.children[0],t);switch(typeof i){case"object":return n.isDate(i)?i.toJSON():JSON.stringify(i)}return String(i)}function pi(e,t){if(!e.operator||e.operator!==bt||!e.children||e.children.length!==2)throw"Invalid operator: AND "+e;return le(I(e.children[0],t))&&le(I(e.children[1],t))}function fi(e,t){if(!e.operator||e.operator!==wt||!e.children||e.children.length!==2)throw"Invalid operator: OR "+e;return le(I(e.children[0],t))||le(I(e.children[1],t))}function hi(e,t){if(!e.operator||[xt,De].indexOf(e.operator)===-1||!e.children||e.children.length!==2)throw"Invalid operator: IN/NOT IN "+e;var i=I(e.children[0],t),r=I(e.children[1],t);if(!n.isArray(r)&&!n.isString(r))throw"Invalid operand for operator IN: invalid type"+r;var o=r.indexOf(i)>-1;return e.operator===De?!o:o}function di(e,t){if(!e.operator||e.operator!==kt||!e.children||e.children.length<2)throw"Invalid operator: PLUS "+e;var i=I(e.children[0],t),r=I(e.children[1],t);return typeof i=="number"&&typeof r=="number"||typeof i=="string"&&typeof r=="string"?i+r:null}function gi(e,t){if(!e.operator||[Pe,Re,qe,Ue].indexOf(e.operator)===-1||!e.children||e.children.length<2)throw"Invalid arithmetic operator "+e;var i=I(e.children[0],t),r=I(e.children[1],t);if(typeof i=="number"&&typeof r=="number")switch(e.operator){case Pe:return i-r;case Re:return i*r;case qe:return r!==0?i/r:null;case Ue:return r===0?null:i===0?0:i<0&&r>0||i>0&&r<0?-(Math.floor(i/r)*r-i):i%r;default:throw"Unknown operator: "+e.operator}return null}function vi(e,t){if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function mi(e,t){if(e===null&&e===t)return!0;if(typeof e==typeof t)switch(typeof e){case"number":case"string":case"boolean":return e===t;case"object":if(n.isArray(e)&&n.isArray(t))return vi(e,t);if(n.isDate(e)&&n.isDate(t))return e.getTime()===t.getTime();if(n.isObject(e)&&n.isObject(t))return JSON.stringify(e)===JSON.stringify(t)}return!1}function yi(e,t){if(!e.operator||[Be,Fe].indexOf(e.operator)===-1||!e.children||e.children.length!==2)throw"Invalid equality operator "+e;var i=mi(I(e.children[0],t),I(e.children[1],t));switch(e.operator){case Be:return i;case Fe:return!i}}function bi(e,t){if(!e.operator||[fe,de,he,ge].indexOf(e.operator)===-1||!e.children||e.children.length!==2)throw"Invalid comparison operator "+e;var i=I(e.children[0],t),r=I(e.children[1],t);if(typeof i==typeof r){if(typeof r=="number"||n.isDate(r))switch(i=He(i),r=He(r),e.operator){case fe:return i>r;case de:return i>=r;case he:return i<r;case ge:return i<=r}else if(typeof r=="string"){var o=i.localeCompare(r);switch(e.operator){case fe:return o>0;case de:return o>=0;case he:return o<0;case ge:return o<=0}}}return null}function wi(e,t){if(!e.operator||[At,Ce].indexOf(e.operator)===-1||!e.children||e.children.length!==1)throw"Invalid defined/not defined operator: "+e;var i=I(e.children[0],t)!==null;return e.operator===Ce?!i:i}function xi(e,t){if(!e.operator||e.operator!==Nt||!e.children||e.children.length!==1)throw"Invalid not operator: "+e;var i=I(e.children[0],t);return i===null?!0:typeof i=="boolean"?!i:null}function ki(e,t){if(!e.operator)throw"Invalid operator: operator key missing "+e;switch(e.operator){case bt:return pi(e,t);case wt:return fi(e,t);case xt:case De:return hi(e,t);case kt:return di(e,t);case Pe:case Re:case qe:case Ue:return gi(e,t);case Be:case Fe:return yi(e,t);case fe:case he:case de:case ge:return bi(e,t);case Et:return ci(e,t);case It:return _i(e,t);case Tt:return ui(e,t);case Ot:return ai(e,t);case St:return li(e,t);case At:case Ce:return wi(e,t);case Nt:return xi(e,t)}}function Ei(e){var t=e[Zt];if(!t||!t[Ne]||!t[ce])throw"Invalid window: missing required keys "+JSON.stringify(e);var i=new Date;switch(t[Ne]){case ei:i.setTime(i.getTime()+t[ce]*-1*60*60*1e3);break;case ti:i.setTime(i.getTime()+t[ce]*-1*24*60*60*1e3);break;case ii:i.setTime(i.getTime()+t[ce]*-1*7*24*60*60*1e3);break;case ri:i.setTime(i.getTime()+t[ce]*-1*30*24*60*60*1e3);break;default:throw"Invalid unit: "+t[Ne]}return i}function Ii(e,t){if(!e.property||!e.value)throw"Invalid operand: missing required keys "+e;switch(e.property){case ni:return t[e.value]!==void 0?t[e.value]:null;case oi:return e.value===si?new Date:typeof e.value=="object"?Ei(e.value):e.value;default:throw"Invalid operand: Invalid property type "+e.property}}function I(e,t){if(e[Vt])return Ii(e,t);if(e[Qt])return ki(e,t)}var p=function(e,t){n.bind_instance_methods(this),this.mixpanel=t,this.persistence=this.mixpanel.persistence,this.resource_protocol=this.mixpanel.get_config("inapp_protocol"),this.cdn_host=this.mixpanel.get_config("cdn"),this.campaign_id=n.escapeHTML(e.id),this.message_id=n.escapeHTML(e.message_id),this.body=(n.escapeHTML(e.body)||"").replace(/\n/g,"<br/>"),this.cta=n.escapeHTML(e.cta)||"Close",this.notif_type=n.escapeHTML(e.type)||"takeover",this.style=n.escapeHTML(e.style)||"light",this.title=n.escapeHTML(e.title)||"",this.video_width=p.VIDEO_WIDTH,this.video_height=p.VIDEO_HEIGHT,this.display_triggers=e.display_triggers||[],this.dest_url=e.cta_url||null,this.image_url=e.image_url||null,this.thumb_image_url=e.thumb_image_url||null,this.video_url=e.video_url||null,this.thumb_image_url&&this.thumb_image_url.indexOf("//")===0&&(this.thumb_image_url=this.thumb_image_url.replace("//",this.resource_protocol)),this.clickthrough=!0,this.dest_url||(this.dest_url="#dismiss",this.clickthrough=!1),this.mini=this.notif_type==="mini",this.mini||(this.notif_type="takeover"),this.notif_width=this.mini?p.NOTIF_WIDTH_MINI:p.NOTIF_WIDTH,this._set_client_config(),this.imgs_to_preload=this._init_image_html(),this._init_video()};p.ANIM_TIME=200;p.MARKUP_PREFIX="mixpanel-notification";p.BG_OPACITY=.6;p.NOTIF_TOP=25;p.NOTIF_START_TOP=200;p.NOTIF_WIDTH=388;p.NOTIF_WIDTH_MINI=420;p.NOTIF_HEIGHT_MINI=85;p.THUMB_BORDER_SIZE=5;p.THUMB_IMG_SIZE=60;p.THUMB_OFFSET=Math.round(p.THUMB_IMG_SIZE/2);p.VIDEO_WIDTH=595;p.VIDEO_HEIGHT=334;p.prototype.show=function(){var e=this;if(this._set_client_config(),!this.body_el){setTimeout(function(){e.show()},300);return}this._init_styles(),this._init_notification_el(),this._preload_images(this._attach_and_animate)};p.prototype.dismiss=n.safewrap(function(){this.marked_as_shown||this._mark_delivery({invisible:!0});var e=this.showing_video?this._get_el("video"):this._get_notification_display_el();if(this.use_transitions)this._remove_class("bg","visible"),this._add_class(e,"exiting"),setTimeout(this._remove_notification_el,p.ANIM_TIME);else{var t,i,r;this.mini?(t="right",i=20,r=-100):(t="top",i=p.NOTIF_TOP,r=p.NOTIF_START_TOP+p.NOTIF_TOP),this._animate_els([{el:this._get_el("bg"),attr:"opacity",start:p.BG_OPACITY,goal:0},{el:e,attr:"opacity",start:1,goal:0},{el:e,attr:t,start:i,goal:r}],p.ANIM_TIME,this._remove_notification_el)}});p.prototype._add_class=n.safewrap(function(e,t){t=p.MARKUP_PREFIX+"-"+t,typeof e=="string"&&(e=this._get_el(e)),e.className?~(" "+e.className+" ").indexOf(" "+t+" ")||(e.className+=" "+t):e.className=t});p.prototype._remove_class=n.safewrap(function(e,t){t=p.MARKUP_PREFIX+"-"+t,typeof e=="string"&&(e=this._get_el(e)),e.className&&(e.className=(" "+e.className+" ").replace(" "+t+" ","").replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,""))});p.prototype._animate_els=n.safewrap(function(e,t,i,r){var o=this,s=!1,a,_,u=1*new Date,l;for(r=r||u,l=u-r,a=0;a<e.length;a++)if(_=e[a],typeof _.val>"u"&&(_.val=_.start),_.val!==_.goal){s=!0;var d=_.goal-_.start,h=_.goal>=_.start?1:-1;_.val=_.start+d*l/t,_.attr!=="opacity"&&(_.val=Math.round(_.val)),(h>0&&_.val>=_.goal||h<0&&_.val<=_.goal)&&(_.val=_.goal)}if(!s){i&&i();return}for(a=0;a<e.length;a++)if(_=e[a],_.el){var f=_.attr==="opacity"?"":"px";_.el.style[_.attr]=String(_.val)+f}setTimeout(function(){o._animate_els(e,t,i,r)},10)});p.prototype._attach_and_animate=n.safewrap(function(){var e=this;if(!(this.shown||this._get_shown_campaigns()[this.campaign_id])){this.shown=!0,this.body_el.appendChild(this.notification_el),setTimeout(function(){var i=e._get_notification_display_el();if(e.use_transitions)e.mini||e._add_class("bg","visible"),e._add_class(i,"visible"),e._mark_as_shown();else{var r,o,s;e.mini?(r="right",o=-100,s=20):(r="top",o=p.NOTIF_START_TOP+p.NOTIF_TOP,s=p.NOTIF_TOP),e._animate_els([{el:e._get_el("bg"),attr:"opacity",start:0,goal:p.BG_OPACITY},{el:i,attr:"opacity",start:0,goal:1},{el:i,attr:r,start:o,goal:s}],p.ANIM_TIME,e._mark_as_shown)}},100),n.register_event(e._get_el("cancel"),"click",function(i){i.preventDefault(),e.dismiss()});var t=e._get_el("button")||e._get_el("mini-content");n.register_event(t,"click",function(i){if(i.preventDefault(),e.show_video)e._track_event("$campaign_open",{$resource_type:"video"}),e._switch_to_video();else if(e.dismiss(),e.clickthrough){var r=null;e.mixpanel.get_config("inapp_link_new_window")?window.open(e.dest_url):r=function(){window.location.href=e.dest_url},e._track_event("$campaign_open",{$resource_type:"link"},r)}})}});p.prototype._get_el=function(e){return document.getElementById(p.MARKUP_PREFIX+"-"+e)};p.prototype._get_notification_display_el=function(){return this._get_el(this.notif_type)};p.prototype._get_shown_campaigns=function(){return this.persistence.props[_e]||(this.persistence.props[_e]={})};p.prototype._matches_event_data=n.safewrap(function(e){for(var t=e.event||"",i=0;i<this.display_triggers.length;i++){var r=this.display_triggers[i],o=r.event||"";if(o==="$any_event"||t===r.event)if(r.selector&&!n.isEmptyObject(r.selector)){if(I(r.selector,e.properties))return!0}else return!0}return!1});p.prototype._browser_lte=function(e,t){return this.browser_versions[e]&&this.browser_versions[e]<=t};p.prototype._init_image_html=function(){var e=[];return this.mini?(this.thumb_image_url=this.thumb_image_url||this.cdn_host+"/site_media/images/icons/notifications/mini-news-dark.png",e.push(this.thumb_image_url)):(this.image_url?(e.push(this.image_url),this.img_html='<img id="img" src="'+this.image_url+'"/>'):this.img_html="",this.thumb_image_url?(e.push(this.thumb_image_url),this.thumb_img_html='<div id="thumbborder-wrapper"><div id="thumbborder"></div></div><img id="thumbnail" src="'+this.thumb_image_url+'" width="'+p.THUMB_IMG_SIZE+'" height="'+p.THUMB_IMG_SIZE+'"/><div id="thumbspacer"></div>'):this.thumb_img_html=""),e};p.prototype._init_notification_el=function(){var e="",t="",i="",r='<div id="cancel"><div id="cancel-icon"></div></div>';if(this.notification_el=document.createElement("div"),this.notification_el.id=p.MARKUP_PREFIX+"-wrapper",this.mini)e='<div id="mini"><div id="mainbox">'+r+'<div id="mini-content"><div id="mini-icon"><div id="mini-icon-img"></div></div><div id="body"><div id="body-text"><div>'+this.body+'</div></div></div></div></div><div id="mini-border"></div></div>';else{var o=this.clickthrough||this.show_video?"":'<div id="button-close"></div>',s=this.show_video?'<div id="button-play"></div>':"";this._browser_lte("ie",7)&&(o="",s=""),e='<div id="takeover">'+this.thumb_img_html+'<div id="mainbox">'+r+'<div id="content">'+this.img_html+'<div id="title">'+this.title+'</div><div id="body">'+this.body+'</div><div id="tagline"><a href="http://mixpanel.com?from=inapp" target="_blank">POWERED BY MIXPANEL</a></div></div><div id="button">'+o+'<a id="button-link" href="'+this.dest_url+'">'+this.cta+"</a>"+s+"</div></div></div>"}this.youtube_video?(t=this.resource_protocol+"www.youtube.com/embed/"+this.youtube_video+"?wmode=transparent&showinfo=0&modestbranding=0&rel=0&autoplay=1&loop=0&vq=hd1080",this.yt_custom&&(t+="&enablejsapi=1&html5=1&controls=0",i='<div id="video-controls"><div id="video-progress" class="video-progress-el"><div id="video-progress-total" class="video-progress-el"></div><div id="video-elapsed" class="video-progress-el"></div></div><div id="video-time" class="video-progress-el"></div></div>')):this.vimeo_video&&(t=this.resource_protocol+"player.vimeo.com/video/"+this.vimeo_video+"?autoplay=1&title=0&byline=0&portrait=0"),this.show_video&&(this.video_iframe='<iframe id="'+p.MARKUP_PREFIX+'-video-frame" width="'+this.video_width+'" height="'+this.video_height+'"  src="'+t+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen="1" scrolling="no"></iframe>',i='<div id="video-'+(this.flip_animate?"":"no")+'flip"><div id="video"><div id="video-holder"></div>'+i+"</div></div>");var a=i+e;this.flip_animate&&(a=(this.mini?e:"")+'<div id="flipcontainer"><div id="flipper">'+(this.mini?i:a)+"</div></div>"),this.notification_el.innerHTML=('<div id="overlay" class="'+this.notif_type+'"><div id="campaignid-'+this.campaign_id+'"><div id="bgwrapper"><div id="bg"></div>'+a+"</div></div></div>").replace(/class="/g,'class="'+p.MARKUP_PREFIX+"-").replace(/id="/g,'id="'+p.MARKUP_PREFIX+"-")};p.prototype._init_styles=function(){this.style==="dark"?this.style_vals={bg:"#1d1f25",bg_actions:"#282b32",bg_hover:"#3a4147",bg_light:"#4a5157",border_gray:"#32353c",cancel_opacity:"0.4",mini_hover:"#2a3137",text_title:"#fff",text_main:"#9498a3",text_tagline:"#464851",text_hover:"#ddd"}:this.style_vals={bg:"#fff",bg_actions:"#e7eaee",bg_hover:"#eceff3",bg_light:"#f5f5f5",border_gray:"#e4ecf2",cancel_opacity:"1.0",mini_hover:"#fafafa",text_title:"#5c6578",text_main:"#8b949b",text_tagline:"#ced9e6",text_hover:"#7c8598"};var e="0px 0px 35px 0px rgba(45, 49, 56, 0.7)",t=e,i=e,r=p.THUMB_IMG_SIZE+p.THUMB_BORDER_SIZE*2,o=p.ANIM_TIME/1e3+"s";this.mini&&(e="none");var s={},a=p.NOTIF_WIDTH_MINI+20;s["@media only screen and (max-width: "+(a-1)+"px)"]={"#overlay":{display:"none"}};var _={".flipped":{transform:"rotateY(180deg)"},"#overlay":{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",overflow:"auto","text-align":"center","z-index":"10000","font-family":'"Helvetica", "Arial", sans-serif',"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},"#overlay.mini":{height:"0",overflow:"visible"},"#overlay a":{width:"initial",padding:"0","text-decoration":"none","text-transform":"none",color:"inherit"},"#bgwrapper":{position:"relative",width:"100%",height:"100%"},"#bg":{position:"fixed",top:"0",left:"0",width:"100%",height:"100%","min-width":this.doc_width*4+"px","min-height":this.doc_height*4+"px","background-color":"black",opacity:"0.0","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)",filter:"alpha(opacity=60)",transition:"opacity "+o},"#bg.visible":{opacity:p.BG_OPACITY},".mini #bg":{width:"0",height:"0","min-width":"0"},"#flipcontainer":{perspective:"1000px",position:"absolute",width:"100%"},"#flipper":{position:"relative","transform-style":"preserve-3d",transition:"0.3s"},"#takeover":{position:"absolute",left:"50%",width:p.NOTIF_WIDTH+"px","margin-left":Math.round(-p.NOTIF_WIDTH/2)+"px","backface-visibility":"hidden",transform:"rotateY(0deg)",opacity:"0.0",top:p.NOTIF_START_TOP+"px",transition:"opacity "+o+", top "+o},"#takeover.visible":{opacity:"1.0",top:p.NOTIF_TOP+"px"},"#takeover.exiting":{opacity:"0.0",top:p.NOTIF_START_TOP+"px"},"#thumbspacer":{height:p.THUMB_OFFSET+"px"},"#thumbborder-wrapper":{position:"absolute",top:-p.THUMB_BORDER_SIZE+"px",left:p.NOTIF_WIDTH/2-p.THUMB_OFFSET-p.THUMB_BORDER_SIZE+"px",width:r+"px",height:r/2+"px",overflow:"hidden"},"#thumbborder":{position:"absolute",width:r+"px",height:r+"px","border-radius":r+"px","background-color":this.style_vals.bg_actions,opacity:"0.5"},"#thumbnail":{position:"absolute",top:"0px",left:p.NOTIF_WIDTH/2-p.THUMB_OFFSET+"px",width:p.THUMB_IMG_SIZE+"px",height:p.THUMB_IMG_SIZE+"px",overflow:"hidden","z-index":"100","border-radius":p.THUMB_IMG_SIZE+"px"},"#mini":{position:"absolute",right:"20px",top:p.NOTIF_TOP+"px",width:this.notif_width+"px",height:p.NOTIF_HEIGHT_MINI*2+"px","margin-top":20-p.NOTIF_HEIGHT_MINI+"px","backface-visibility":"hidden",opacity:"0.0",transform:"rotateX(90deg)",transition:"opacity 0.3s, transform 0.3s, right 0.3s"},"#mini.visible":{opacity:"1.0",transform:"rotateX(0deg)"},"#mini.exiting":{opacity:"0.0",right:"-150px"},"#mainbox":{"border-radius":"4px","box-shadow":e,"text-align":"center","background-color":this.style_vals.bg,"font-size":"14px",color:this.style_vals.text_main},"#mini #mainbox":{height:p.NOTIF_HEIGHT_MINI+"px","margin-top":p.NOTIF_HEIGHT_MINI+"px","border-radius":"3px",transition:"background-color "+o},"#mini-border":{height:p.NOTIF_HEIGHT_MINI+6+"px",width:p.NOTIF_WIDTH_MINI+6+"px",position:"absolute",top:"-3px",left:"-3px","margin-top":p.NOTIF_HEIGHT_MINI+"px","border-radius":"6px",opacity:"0.25","background-color":"#fff","z-index":"-1","box-shadow":i},"#mini-icon":{position:"relative",display:"inline-block",width:"75px",height:p.NOTIF_HEIGHT_MINI+"px","border-radius":"3px 0 0 3px","background-color":this.style_vals.bg_actions,background:"linear-gradient(135deg, "+this.style_vals.bg_light+" 0%, "+this.style_vals.bg_actions+" 100%)",transition:"background-color "+o},"#mini:hover #mini-icon":{"background-color":this.style_vals.mini_hover},"#mini:hover #mainbox":{"background-color":this.style_vals.mini_hover},"#mini-icon-img":{position:"absolute","background-image":"url("+this.thumb_image_url+")",width:"48px",height:"48px",top:"20px",left:"12px"},"#content":{padding:"30px 20px 0px 20px"},"#mini-content":{"text-align":"left",height:p.NOTIF_HEIGHT_MINI+"px",cursor:"pointer"},"#img":{width:"328px","margin-top":"30px","border-radius":"5px"},"#title":{"max-height":"600px",overflow:"hidden","word-wrap":"break-word",padding:"25px 0px 20px 0px","font-size":"19px","font-weight":"bold",color:this.style_vals.text_title},"#body":{"max-height":"600px","margin-bottom":"25px",overflow:"hidden","word-wrap":"break-word","line-height":"21px","font-size":"15px","font-weight":"normal","text-align":"left"},"#mini #body":{display:"inline-block","max-width":"250px",margin:"0 0 0 30px",height:p.NOTIF_HEIGHT_MINI+"px","font-size":"16px","letter-spacing":"0.8px",color:this.style_vals.text_title},"#mini #body-text":{display:"table",height:p.NOTIF_HEIGHT_MINI+"px"},"#mini #body-text div":{display:"table-cell","vertical-align":"middle"},"#tagline":{"margin-bottom":"15px","font-size":"10px","font-weight":"600","letter-spacing":"0.8px",color:"#ccd7e0","text-align":"left"},"#tagline a":{color:this.style_vals.text_tagline,transition:"color "+o},"#tagline a:hover":{color:this.style_vals.text_hover},"#cancel":{position:"absolute",right:"0",width:"8px",height:"8px",padding:"10px","border-radius":"20px",margin:"12px 12px 0 0","box-sizing":"content-box",cursor:"pointer",transition:"background-color "+o},"#mini #cancel":{margin:"7px 7px 0 0"},"#cancel-icon":{width:"8px",height:"8px",overflow:"hidden","background-image":"url("+this.cdn_host+"/site_media/images/icons/notifications/cancel-x.png)",opacity:this.style_vals.cancel_opacity},"#cancel:hover":{"background-color":this.style_vals.bg_hover},"#button":{display:"block",height:"60px","line-height":"60px","text-align":"center","background-color":this.style_vals.bg_actions,"border-radius":"0 0 4px 4px",overflow:"hidden",cursor:"pointer",transition:"background-color "+o},"#button-close":{display:"inline-block",width:"9px",height:"60px","margin-right":"8px","vertical-align":"top","background-image":"url("+this.cdn_host+"/site_media/images/icons/notifications/close-x-"+this.style+".png)","background-repeat":"no-repeat","background-position":"0px 25px"},"#button-play":{display:"inline-block",width:"30px",height:"60px","margin-left":"15px","background-image":"url("+this.cdn_host+"/site_media/images/icons/notifications/play-"+this.style+"-small.png)","background-repeat":"no-repeat","background-position":"0px 15px"},"a#button-link":{display:"inline-block","vertical-align":"top","text-align":"center","font-size":"17px","font-weight":"bold",overflow:"hidden","word-wrap":"break-word",color:this.style_vals.text_title,transition:"color "+o},"#button:hover":{"background-color":this.style_vals.bg_hover,color:this.style_vals.text_hover},"#button:hover a":{color:this.style_vals.text_hover},"#video-noflip":{position:"relative",top:-this.video_height*2+"px"},"#video-flip":{"backface-visibility":"hidden",transform:"rotateY(180deg)"},"#video":{position:"absolute",width:this.video_width-1+"px",height:this.video_height+"px",top:p.NOTIF_TOP+"px","margin-top":"100px",left:"50%","margin-left":Math.round(-this.video_width/2)+"px",overflow:"hidden","border-radius":"5px","box-shadow":t,transform:"translateZ(1px)",transition:"opacity "+o+", top "+o},"#video.exiting":{opacity:"0.0",top:this.video_height+"px"},"#video-holder":{position:"absolute",width:this.video_width-1+"px",height:this.video_height+"px",overflow:"hidden","border-radius":"5px"},"#video-frame":{"margin-left":"-1px",width:this.video_width+"px"},"#video-controls":{opacity:"0",transition:"opacity 0.5s"},"#video:hover #video-controls":{opacity:"1.0"},"#video .video-progress-el":{position:"absolute",bottom:"0",height:"25px","border-radius":"0 0 0 5px"},"#video-progress":{width:"90%"},"#video-progress-total":{width:"100%","background-color":this.style_vals.bg,opacity:"0.7"},"#video-elapsed":{width:"0","background-color":"#6cb6f5",opacity:"0.9"},"#video #video-time":{width:"10%",right:"0","font-size":"11px","line-height":"25px",color:this.style_vals.text_main,"background-color":"#666","border-radius":"0 0 5px 0"}};this._browser_lte("ie",8)&&n.extend(_,{"* html #overlay":{position:"absolute"},"* html #bg":{position:"absolute"},"html, body":{height:"100%"}}),this._browser_lte("ie",7)&&n.extend(_,{"#mini #body":{display:"inline",zoom:"1",border:"1px solid "+this.style_vals.bg_hover},"#mini #body-text":{padding:"20px"},"#mini #mini-icon":{display:"none"}});var u=["backface-visibility","border-radius","box-shadow","opacity","perspective","transform","transform-style","transition"],l=["khtml","moz","ms","o","webkit"];for(var d in _)for(var h=0;h<u.length;h++){var f=u[h];if(f in _[d])for(var v=_[d][f],g=0;g<l.length;g++)_[d]["-"+l[g]+"-"+f]=v}var E=function(m,N){var T=function(P){var A="";for(var O in P){var qt=O.replace(/#/g,"#"+p.MARKUP_PREFIX+"-").replace(/\./g,"."+p.MARKUP_PREFIX+"-");A+=`
`+qt+" {";var it=P[O];for(var rt in it)A+=rt+":"+it[rt]+";";A+="}"}return A},G=function(P){var A="";for(var O in P)A+=`
`+O+" {"+T(P[O])+`
}`;return A},K=T(m)+G(N),B=document.head||document.getElementsByTagName("head")[0]||document.documentElement,V=document.createElement("style");B.appendChild(V),V.setAttribute("type","text/css"),V.styleSheet?V.styleSheet.cssText=K:V.textContent=K};E(_,s)};p.prototype._init_video=n.safewrap(function(){if(!!this.video_url){var e=this;e.yt_custom="postMessage"in window,e.dest_url=e.video_url;var t=e.video_url.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?/ ]{11})/i),i=e.video_url.match(/vimeo\.com\/.*?(\d+)/i);if(t){if(e.show_video=!0,e.youtube_video=t[1],e.yt_custom){window.onYouTubeIframeAPIReady=function(){e._get_el("video-frame")&&e._yt_video_ready()};var r=document.createElement("script");r.src=e.resource_protocol+"www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o)}}else i&&(e.show_video=!0,e.vimeo_video=i[1]);(e._browser_lte("ie",7)||e._browser_lte("firefox",3))&&(e.show_video=!1,e.clickthrough=!0)}});p.prototype._mark_as_shown=n.safewrap(function(){var e=this;n.register_event(e._get_el("bg"),"click",function(){e.dismiss()});var t=function(r,o){var s={};return document.defaultView&&document.defaultView.getComputedStyle?s=document.defaultView.getComputedStyle(r,null):r.currentStyle&&(s=r.currentStyle),s[o]};if(this.campaign_id){var i=this._get_el("overlay");i&&t(i,"visibility")!=="hidden"&&t(i,"display")!=="none"&&this._mark_delivery()}});p.prototype._mark_delivery=n.safewrap(function(e){this.marked_as_shown||(this.marked_as_shown=!0,this.campaign_id&&(this._get_shown_campaigns()[this.campaign_id]=1*new Date,this.persistence.save()),this._track_event("$campaign_delivery",e),this.mixpanel.people.append({$campaigns:this.campaign_id,$notifications:{campaign_id:this.campaign_id,message_id:this.message_id,type:"web",time:new Date}}))});p.prototype._preload_images=function(e){var t=this;if(this.imgs_to_preload.length===0){e();return}for(var i=0,r=[],o=function(){i++,i===t.imgs_to_preload.length&&e&&(e(),e=null)},s=0;s<this.imgs_to_preload.length;s++){var a=new Image;a.onload=o,a.src=this.imgs_to_preload[s],a.complete&&o(),r.push(a)}this._browser_lte("ie",7)&&setTimeout(function(){var _=!0;for(s=0;s<r.length;s++)r[s].complete||(_=!1);_&&e&&(e(),e=null)},500)};p.prototype._remove_notification_el=n.safewrap(function(){window.clearInterval(this._video_progress_checker),this.notification_el.style.visibility="hidden",this.body_el.removeChild(this.notification_el)});p.prototype._set_client_config=function(){var e=function(o){var s=navigator.userAgent.match(o);return s&&s[1]};this.browser_versions={},this.browser_versions.chrome=e(/Chrome\/(\d+)/),this.browser_versions.firefox=e(/Firefox\/(\d+)/),this.browser_versions.ie=e(/MSIE (\d+).+/),!this.browser_versions.ie&&!window.ActiveXObject&&"ActiveXObject"in window&&(this.browser_versions.ie=11),this.body_el=document.body||document.getElementsByTagName("body")[0],this.body_el&&(this.doc_width=Math.max(this.body_el.scrollWidth,document.documentElement.scrollWidth,this.body_el.offsetWidth,document.documentElement.offsetWidth,this.body_el.clientWidth,document.documentElement.clientWidth),this.doc_height=Math.max(this.body_el.scrollHeight,document.documentElement.scrollHeight,this.body_el.offsetHeight,document.documentElement.offsetHeight,this.body_el.clientHeight,document.documentElement.clientHeight));var t=this.browser_versions.ie,i=document.createElement("div").style,r=function(o){if(o in i)return!0;if(!t){o=o[0].toUpperCase()+o.slice(1);for(var s=["O"+o,"Webkit"+o,"Moz"+o],a=0;a<s.length;a++)if(s[a]in i)return!0}return!1};this.use_transitions=this.body_el&&r("transition")&&r("transform"),this.flip_animate=(this.browser_versions.chrome>=33||this.browser_versions.firefox>=15)&&this.body_el&&r("backfaceVisibility")&&r("perspective")&&r("transform")};p.prototype._switch_to_video=n.safewrap(function(){var e=this,t=[{el:e._get_notification_display_el(),attr:"opacity",start:1,goal:0},{el:e._get_notification_display_el(),attr:"top",start:p.NOTIF_TOP,goal:-500},{el:e._get_el("video-noflip"),attr:"opacity",start:0,goal:1},{el:e._get_el("video-noflip"),attr:"top",start:-e.video_height*2,goal:0}];if(e.mini){var i=e._get_el("bg"),r=e._get_el("overlay");i.style.width="100%",i.style.height="100%",r.style.width="100%",e._add_class(e._get_notification_display_el(),"exiting"),e._add_class(i,"visible"),t.push({el:e._get_el("bg"),attr:"opacity",start:0,goal:p.BG_OPACITY})}var o=e._get_el("video-holder");o.innerHTML=e.video_iframe;var s=function(){window.YT&&window.YT.loaded&&e._yt_video_ready(),e.showing_video=!0,e._get_notification_display_el().style.visibility="hidden"};e.flip_animate?(e._add_class("flipper","flipped"),setTimeout(s,p.ANIM_TIME)):e._animate_els(t,p.ANIM_TIME,s)});p.prototype._track_event=function(e,t,i){this.campaign_id?(t=t||{},t=n.extend(t,{campaign_id:this.campaign_id,message_id:this.message_id,message_type:"web_inapp",message_subtype:this.notif_type}),this.mixpanel.track(e,t,i)):i&&i.call()};p.prototype._yt_video_ready=n.safewrap(function(){var e=this;if(!e.video_inited){e.video_inited=!0;var t=e._get_el("video-elapsed"),i=e._get_el("video-time"),r=e._get_el("video-progress");new window.YT.Player(p.MARKUP_PREFIX+"-video-frame",{events:{onReady:function(o){var s=o.target,a=s.getDuration(),_=function(l){return("00"+l).slice(-2)},u=function(l){var d=Math.round(a-l),h=Math.floor(d/60),f=Math.floor(h/60);d-=h*60,h-=f*60,i.innerHTML="-"+(f?f+":":"")+_(h)+":"+_(d)};u(0),e._video_progress_checker=window.setInterval(function(){var l=s.getCurrentTime();t.style.width=l/a*100+"%",u(l)},250),n.register_event(r,"click",function(l){var d=Math.max(0,l.pageX-r.getBoundingClientRect().left);s.seekTo(a*d/r.clientWidth,!0)})}}})}});var y=function(){};n.extend(y.prototype,mt);y.prototype._init=function(e){this._mixpanel=e};y.prototype.set=Q(function(e,t,i){var r=this.set_action(e,t);return n.isObject(e)&&(i=t),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),r[X]=n.extend({},n.info.people_properties(),this._mixpanel.persistence.get_referrer_info(),r[X]),this._send_request(r,i)});y.prototype.set_once=Q(function(e,t,i){var r=this.set_once_action(e,t);return n.isObject(e)&&(i=t),this._send_request(r,i)});y.prototype.unset=Q(function(e,t){var i=this.unset_action(e);return this._send_request(i,t)});y.prototype.increment=Q(function(e,t,i){var r={},o={};return n.isObject(e)?(n.each(e,function(s,a){if(!this._is_reserved_property(a))if(isNaN(parseFloat(s))){b.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else o[a]=s},this),i=t):(n.isUndefined(t)&&(t=1),o[e]=t),r[Z]=o,this._send_request(r,i)});y.prototype.append=Q(function(e,t,i){n.isObject(e)&&(i=t);var r=this.append_action(e,t);return this._send_request(r,i)});y.prototype.remove=Q(function(e,t,i){n.isObject(e)&&(i=t);var r=this.remove_action(e,t);return this._send_request(r,i)});y.prototype.union=Q(function(e,t,i){n.isObject(e)&&(i=t);var r=this.union_action(e,t);return this._send_request(r,i)});y.prototype.track_charge=Q(function(e,t,i){if(!n.isNumber(e)&&(e=parseFloat(e),isNaN(e))){b.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}return this.append("$transactions",n.extend({$amount:e},t),i)});y.prototype.clear_charges=function(e){return this.set("$transactions",[],e)};y.prototype.delete_user=function(){if(!this._identify_called()){b.error("mixpanel.people.delete_user() requires you to call identify() first");return}var e={$delete:this._mixpanel.get_distinct_id()};return this._send_request(e)};y.prototype.toString=function(){return this._mixpanel.toString()+".people"};y.prototype._send_request=function(e,t){e.$token=this._get_config("token"),e.$distinct_id=this._mixpanel.get_distinct_id();var i=this._mixpanel.get_property("$device_id"),r=this._mixpanel.get_property("$user_id"),o=this._mixpanel.get_property("$had_persisted_distinct_id");i&&(e.$device_id=i),r&&(e.$user_id=r),o&&(e.$had_persisted_distinct_id=o);var s=n.encodeDates(e);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:s,endpoint:this._get_config("api_host")+"/engage/",batcher:this._mixpanel.request_batchers.people},t):(this._enqueue(e),n.isUndefined(t)||(this._get_config("verbose")?t({status:-1,error:null}):t(-1)),n.truncate(s,255))};y.prototype._get_config=function(e){return this._mixpanel.get_config(e)};y.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0};y.prototype._enqueue=function(e){X in e?this._mixpanel.persistence._add_to_people_queue(X,e):oe in e?this._mixpanel.persistence._add_to_people_queue(oe,e):U in e?this._mixpanel.persistence._add_to_people_queue(U,e):Z in e?this._mixpanel.persistence._add_to_people_queue(Z,e):$ in e?this._mixpanel.persistence._add_to_people_queue($,e):W in e?this._mixpanel.persistence._add_to_people_queue(W,e):ee in e?this._mixpanel.persistence._add_to_people_queue(ee,e):b.error("Invalid call to _enqueue():",e)};y.prototype._flush_one_queue=function(e,t,i,r){var o=this,s=n.extend({},this._mixpanel.persistence._get_queue(e)),a=s;!n.isUndefined(s)&&n.isObject(s)&&!n.isEmptyObject(s)&&(o._mixpanel.persistence._pop_from_people_queue(e,s),r&&(a=r(s)),t.call(o,a,function(_,u){_===0&&o._mixpanel.persistence._add_to_people_queue(e,s),n.isUndefined(i)||i(_,u)}))};y.prototype._flush=function(e,t,i,r,o,s,a){var _=this,u=this._mixpanel.persistence._get_queue($),l=this._mixpanel.persistence._get_queue(W);if(this._flush_one_queue(X,this.set,e),this._flush_one_queue(oe,this.set_once,r),this._flush_one_queue(U,this.unset,s,function(m){return n.keys(m)}),this._flush_one_queue(Z,this.increment,t),this._flush_one_queue(ee,this.union,o),!n.isUndefined(u)&&n.isArray(u)&&u.length){for(var d,h=function(m,N){m===0&&_._mixpanel.persistence._add_to_people_queue($,d),n.isUndefined(i)||i(m,N)},f=u.length-1;f>=0;f--)d=u.pop(),n.isEmptyObject(d)||_.append(d,h);_._mixpanel.persistence.save()}if(!n.isUndefined(l)&&n.isArray(l)&&l.length){for(var v,g=function(m,N){m===0&&_._mixpanel.persistence._add_to_people_queue(W,v),n.isUndefined(a)||a(m,N)},E=l.length-1;E>=0;E--)v=l.pop(),n.isEmptyObject(v)||_.remove(v,g);_._mixpanel.persistence.save()}};y.prototype._is_reserved_property=function(e){return e==="$distinct_id"||e==="$token"||e==="$device_id"||e==="$user_id"||e==="$had_persisted_distinct_id"};y.prototype.set=y.prototype.set;y.prototype.set_once=y.prototype.set_once;y.prototype.unset=y.prototype.unset;y.prototype.increment=y.prototype.increment;y.prototype.append=y.prototype.append;y.prototype.remove=y.prototype.remove;y.prototype.union=y.prototype.union;y.prototype.track_charge=y.prototype.track_charge;y.prototype.clear_charges=y.prototype.clear_charges;y.prototype.delete_user=y.prototype.delete_user;y.prototype.toString=y.prototype.toString;var et,M,Mt=0,Ti=1,Oi=function(e){return e},Ie=function(){},R="mixpanel",Dt="base64",Si="json",re=D.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,Pt=!re&&q.indexOf("MSIE")===-1&&q.indexOf("Mozilla")===-1,we=null;C.sendBeacon&&(we=function(){return C.sendBeacon.apply(C,arguments)});var pt={api_host:"https://api-js.mixpanel.com",api_method:"POST",api_transport:"XHR",api_payload_format:Dt,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:Ie,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{}},Rt=!1,c=function(){},$e=function(e,t,i){var r,o=i===R?M:M[i];if(o&&et===Mt)r=o;else{if(o&&!n.isArray(o)){b.error("You have already initialized "+i);return}r=new c}return r._cached_groups={},r._user_decide_check_complete=!1,r._events_tracked_before_user_decide_check_complete=[],r._init(e,t,i),r.people=new y,r.people._init(r),F.DEBUG=F.DEBUG||r.get_config("debug"),!n.isUndefined(o)&&n.isArray(o)&&(r._execute_array.call(r.people,o.people),r._execute_array(o)),r};c.prototype.init=function(e,t,i){if(n.isUndefined(i)){b.error("You must name your new library: init(token, config, name)");return}if(i===R){b.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var r=$e(e,t,i);return M[i]=r,r._loaded(),r};c.prototype._init=function(e,t,i){t=t||{},this.__loaded=!0,this.config={},this._triggered_notifs=[];var r={};if(!("api_payload_format"in t)){var o=t.api_host||pt.api_host;o.match(/\.mixpanel\.com$/)&&(r.api_payload_format=Si)}if(this.set_config(n.extend({},pt,r,t,{name:i,token:e,callback_fn:(i===R?i:R+"."+i)+"._jsc"})),this._jsc=Ie,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests){if(!n.localStorage.is_supported(!0)||!re)this._batch_requests=!1,b.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support");else if(this.init_batchers(),we&&D.addEventListener){var s=n.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);D.addEventListener("pagehide",function(_){_.persisted&&s()}),D.addEventListener("visibilitychange",function(){x.visibilityState==="hidden"&&s()})}}this.persistence=this.cookie=new w(this.config),this.unpersisted_superprops={},this._gdpr_init();var a=n.UUID();this.get_distinct_id()||this.register_once({distinct_id:a,$device_id:a},"")};c.prototype._loaded=function(){this.get_config("loaded")(this),this._set_default_superprops()};c.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(x.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(x.referrer)};c.prototype._dom_loaded=function(){n.each(this.__dom_loaded_queue,function(e){this._track_dom.apply(this,e)},this),this.has_opted_out_tracking()||n.each(this.__request_queue,function(e){this._send_request.apply(this,e)},this),delete this.__dom_loaded_queue,delete this.__request_queue};c.prototype._track_dom=function(e,t){if(this.get_config("img"))return b.error("You can't use DOM tracking functions with img = true."),!1;if(!Rt)return this.__dom_loaded_queue.push([e,t]),!1;var i=new e().init(this);return i.track.apply(i,t)};c.prototype._prepare_callback=function(e,t){if(n.isUndefined(e))return null;if(re){var i=function(a){e(a,t)};return i}else{var r=this._jsc,o=""+Math.floor(Math.random()*1e8),s=this.get_config("callback_fn")+"["+o+"]";return r[o]=function(a){delete r[o],e(a,t)},s}};c.prototype._send_request=function(e,t,i,r){var o=!0;if(Pt)return this.__request_queue.push(arguments),o;var s={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},a=null;!r&&(n.isFunction(i)||typeof i=="string")&&(r=i,i=null),i=n.extend(s,i||{}),re||(i.method="GET");var _=i.method==="POST",u=we&&_&&i.transport.toLowerCase()==="sendbeacon",l=i.verbose;if(t.verbose&&(l=!0),this.get_config("test")&&(t.test=1),l&&(t.verbose=1),this.get_config("img")&&(t.img=1),re||(r?t.callback=r:(l||this.get_config("test"))&&(t.callback="(function(){})")),t.ip=this.get_config("ip")?1:0,t._=new Date().getTime().toString(),_&&(a="data="+encodeURIComponent(t.data),delete t.data),e+="?"+n.HTTPBuildQuery(t),"img"in t){var d=x.createElement("img");d.src=e,x.body.appendChild(d)}else if(u){try{o=we(e,a)}catch(m){b.error(m),o=!1}try{r&&r(o?1:0)}catch(m){b.error(m)}}else if(re)try{var h=new XMLHttpRequest;h.open(i.method,e,!0);var f=this.get_config("xhr_headers");if(_&&(f["Content-Type"]="application/x-www-form-urlencoded"),n.each(f,function(m,N){h.setRequestHeader(N,m)}),i.timeout_ms&&typeof h.timeout<"u"){h.timeout=i.timeout_ms;var v=new Date().getTime()}h.withCredentials=!0,h.onreadystatechange=function(){if(h.readyState===4)if(h.status===200){if(r)if(l){var m;try{m=n.JSONDecode(h.responseText)}catch(T){if(b.error(T),i.ignore_json_errors)m=h.responseText;else return}r(m)}else r(Number(h.responseText))}else{var N;h.timeout&&!h.status&&new Date().getTime()-v>=h.timeout?N="timeout":N="Bad HTTP status: "+h.status+" "+h.statusText,b.error(N),r&&r(l?{status:0,error:N,xhr_req:h}:0)}},h.send(a)}catch(m){b.error(m),o=!1}else{var g=x.createElement("script");g.type="text/javascript",g.async=!0,g.defer=!0,g.src=e;var E=x.getElementsByTagName("script")[0];E.parentNode.insertBefore(g,E)}return o};c.prototype._execute_array=function(e){var t,i=[],r=[],o=[];n.each(e,function(a){a&&(t=a[0],n.isArray(t)?o.push(a):typeof a=="function"?a.call(this):n.isArray(a)&&t==="alias"?i.push(a):n.isArray(a)&&t.indexOf("track")!==-1&&typeof this[t]=="function"?o.push(a):r.push(a))},this);var s=function(a,_){n.each(a,function(u){if(n.isArray(u[0])){var l=_;n.each(u,function(d){l=l[d[0]].apply(l,d.slice(1))})}else this[u[0]].apply(this,u.slice(1))},_)};s(i,this),s(r,this),s(o,this)};c.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events};c.prototype.init_batchers=function(){var e=this.get_config("token");if(!this.are_batchers_initialized()){var t=n.bind(function(i){return new Y("__mpq_"+e+i.queue_suffix,{libConfig:this.config,sendRequestFunc:n.bind(function(r,o,s){this._send_request(this.get_config("api_host")+i.endpoint,this._encode_data_for_request(r),o,this._prepare_callback(s,r))},this),beforeSendHook:n.bind(function(r){return this._run_hook("before_send_"+i.type,r)},this)})},this);this.request_batchers={events:t({type:"events",endpoint:"/track/",queue_suffix:"_ev"}),people:t({type:"people",endpoint:"/engage/",queue_suffix:"_pp"}),groups:t({type:"groups",endpoint:"/groups/",queue_suffix:"_gr"})}}this.get_config("batch_autostart")&&this.start_batch_senders()};c.prototype.start_batch_senders=function(){this.are_batchers_initialized()&&(this._batch_requests=!0,n.each(this.request_batchers,function(e){e.start()}))};c.prototype.stop_batch_senders=function(){this._batch_requests=!1,n.each(this.request_batchers,function(e){e.stop(),e.clear()})};c.prototype.push=function(e){this._execute_array([e])};c.prototype.disable=function(e){typeof e>"u"?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)};c.prototype._encode_data_for_request=function(e){var t=n.JSONEncode(e);return this.get_config("api_payload_format")===Dt&&(t=n.base64Encode(t)),{data:t}};c.prototype._track_or_batch=function(e,t){var i=n.truncate(e.data,255),r=e.endpoint,o=e.batcher,s=e.should_send_immediately,a=e.send_request_options||{};t=t||Ie;var _=!0,u=n.bind(function(){return a.skip_hooks||(i=this._run_hook("before_send_"+e.type,i)),i?(b.log("MIXPANEL REQUEST:"),b.log(i),this._send_request(r,this._encode_data_for_request(i),a,this._prepare_callback(t,i))):null},this);return this._batch_requests&&!s?o.enqueue(i,function(l){l?t(1,i):u()}):_=u(),_&&i};c.prototype.track=te(function(e,t,i,r){!r&&typeof i=="function"&&(r=i,i=null),i=i||{};var o=i.transport;o&&(i.transport=o);var s=i.send_immediately;if(typeof r!="function"&&(r=Ie),n.isUndefined(e)){b.error("No event name provided to mixpanel.track");return}if(this._event_is_disabled(e)){r(0);return}t=t||{},t.token=this.get_config("token");var a=this.persistence.remove_event_timer(e);if(!n.isUndefined(a)){var _=new Date().getTime()-a;t.$duration=parseFloat((_/1e3).toFixed(3))}this._set_default_superprops(),t=n.extend({},n.info.properties(),this.persistence.properties(),this.unpersisted_superprops,t);var u=this.get_config("property_blacklist");n.isArray(u)?n.each(u,function(h){delete t[h]}):b.error("Invalid value for property_blacklist config: "+u);var l={event:e,properties:t},d=this._track_or_batch({type:"events",data:l,endpoint:this.get_config("api_host")+"/track/",batcher:this.request_batchers.events,should_send_immediately:s,send_request_options:i},r);return this._check_and_handle_triggered_notifications(l),d});c.prototype.set_group=te(function(e,t,i){n.isArray(t)||(t=[t]);var r={};return r[e]=t,this.register(r),this.people.set(e,t,i)});c.prototype.add_group=te(function(e,t,i){var r=this.get_property(e);if(r===void 0){var o={};o[e]=[t],this.register(o)}else r.indexOf(t)===-1&&(r.push(t),this.register(o));return this.people.union(e,t,i)});c.prototype.remove_group=te(function(e,t,i){var r=this.get_property(e);if(r!==void 0){var o=r.indexOf(t);o>-1&&(r.splice(o,1),this.register({group_key:r})),r.length===0&&this.unregister(e)}return this.people.remove(e,t,i)});c.prototype.track_with_groups=te(function(e,t,i,r){var o=n.extend({},t||{});return n.each(i,function(s,a){s!=null&&(o[a]=s)}),this.track(e,o,r)});c.prototype._create_map_key=function(e,t){return e+"_"+JSON.stringify(t)};c.prototype._remove_group_from_cache=function(e,t){delete this._cached_groups[this._create_map_key(e,t)]};c.prototype.get_group=function(e,t){var i=this._create_map_key(e,t),r=this._cached_groups[i];return(r===void 0||r._group_key!==e||r._group_id!==t)&&(r=new k,r._init(this,e,t),this._cached_groups[i]=r),r};c.prototype.track_pageview=function(e){n.isUndefined(e)&&(e=x.location.href),this.track("mp_page_view",n.info.pageviewInfo(e))};c.prototype.track_links=function(){return this._track_dom.call(this,ne,arguments)};c.prototype.track_forms=function(){return this._track_dom.call(this,Ee,arguments)};c.prototype.time_event=function(e){if(n.isUndefined(e)){b.error("No event name provided to mixpanel.time_event");return}this._event_is_disabled(e)||this.persistence.set_event_timer(e,new Date().getTime())};var Ni={persistent:!0},tt=function(e){var t;return n.isObject(e)?t=e:n.isUndefined(e)?t={}:t={days:e},n.extend({},Ni,t)};c.prototype.register=function(e,t){var i=tt(t);i.persistent?this.persistence.register(e,i.days):n.extend(this.unpersisted_superprops,e)};c.prototype.register_once=function(e,t,i){var r=tt(i);r.persistent?this.persistence.register_once(e,t,r.days):(typeof t>"u"&&(t="None"),n.each(e,function(o,s){(!this.unpersisted_superprops.hasOwnProperty(s)||this.unpersisted_superprops[s]===t)&&(this.unpersisted_superprops[s]=o)},this))};c.prototype.unregister=function(e,t){t=tt(t),t.persistent?this.persistence.unregister(e):delete this.unpersisted_superprops[e]};c.prototype._register_single=function(e,t){var i={};i[e]=t,this.register(i)};c.prototype.identify=function(e,t,i,r,o,s,a,_){var u=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var l=u;this.register_once({$had_persisted_distinct_id:!0,$device_id:l},"")}e!==u&&e!==this.get_property(be)&&(this.unregister(be),this.register({distinct_id:e})),this._check_and_handle_notifications(this.get_distinct_id()),this._flags.identify_called=!0,this.people._flush(t,i,r,o,s,a,_),e!==u&&this.track("$identify",{distinct_id:e,$anon_distinct_id:u},{skip_hooks:!0})};c.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var e=n.UUID();this.register_once({distinct_id:e,$device_id:e},"")};c.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};c.prototype.alias=function(e,t){if(e===this.get_property(yt))return b.critical("Attempting to create alias for existing People user - aborting."),-2;var i=this;return n.isUndefined(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(be,e),this.track("$create_alias",{alias:e,distinct_id:t},{skip_hooks:!0},function(){i.identify(e)})):(b.error("alias matches current distinct_id - skipping api call."),this.identify(e),-1)};c.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)};c.prototype.set_config=function(e){if(n.isObject(e)){n.extend(this.config,e);var t=e.batch_size;t&&n.each(this.request_batchers,function(i){i.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),F.DEBUG=F.DEBUG||this.get_config("debug")}};c.prototype.get_config=function(e){return this.config[e]};c.prototype._run_hook=function(e){var t=(this.config.hooks[e]||Oi).apply(this,j.call(arguments,1));return typeof t>"u"&&(b.error(e+" hook did not return a value"),t=null),t};c.prototype.get_property=function(e){return this.persistence.props[e]};c.prototype.toString=function(){var e=this.get_config("name");return e!==R&&(e=R+"."+e),e};c.prototype._event_is_disabled=function(e){return n.isBlockedUA(q)||this._flags.disable_all_events||n.include(this.__disabled_events,e)};c.prototype._check_and_handle_triggered_notifications=te(function(e){if(!this._user_decide_check_complete)this._events_tracked_before_user_decide_check_complete.push(e);else for(var t=this._triggered_notifs,i=0;i<t.length;i++){var r=new p(t[i],this);if(r._matches_event_data(e)){this._show_notification(t[i]);return}}});c.prototype._check_and_handle_notifications=te(function(e){if(!(!e||this._flags.identify_called||this.get_config("disable_notifications"))){b.log("MIXPANEL NOTIFICATION CHECK");var t={verbose:!0,version:"3",lib:"web",token:this.get_config("token"),distinct_id:e};this._send_request(this.get_config("api_host")+"/decide/",t,{method:"GET",transport:"XHR"},this._prepare_callback(n.bind(function(i){if(i.notifications&&i.notifications.length>0){this._triggered_notifs=[];var r=[];n.each(i.notifications,function(o){(o.display_triggers&&o.display_triggers.length>0?this._triggered_notifs:r).push(o)},this),r.length>0&&this._show_notification.call(this,r[0])}this._handle_user_decide_check_complete()},this)))}});c.prototype._handle_user_decide_check_complete=function(){this._user_decide_check_complete=!0;for(var e=this._events_tracked_before_user_decide_check_complete;e.length>0;){var t=e.shift();this._check_and_handle_triggered_notifications(t)}};c.prototype._show_notification=function(e){var t=new p(e,this);t.show()};c.prototype._gdpr_init=function(){var e=this.get_config("opt_out_tracking_persistence_type")==="localStorage";e&&n.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_tracking()&&(this.get_config("opt_out_tracking_by_default")||n.cookie.get("mp_optout"))&&(n.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))};c.prototype._gdpr_update_persistence=function(e){var t;if(e&&e.clear_persistence)t=!0;else if(e&&e.enable_persistence)t=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==t&&this.persistence.set_disabled(t),t&&n.each(this.request_batchers,function(i){i.clear()})};c.prototype._gdpr_call_func=function(e,t){return t=n.extend({track:n.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},t),n.localStorage.is_supported()||(t.persistence_type="cookie"),e(this.get_config("token"),{track:t.track,trackEventName:t.track_event_name,trackProperties:t.track_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieDomain:t.cookie_domain,cookieExpiration:t.cookie_expiration,crossSiteCookie:t.cross_site_cookie,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie,ignoreDnt:t.ignore_dnt})};c.prototype.opt_in_tracking=function(e){e=n.extend({enable_persistence:!0},e),this._gdpr_call_func(Gt,e),this._gdpr_update_persistence(e)};c.prototype.opt_out_tracking=function(e){e=n.extend({clear_persistence:!0,delete_user:!0},e),e.delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(Kt,e),this._gdpr_update_persistence(e)};c.prototype.has_opted_in_tracking=function(e){return this._gdpr_call_func(zt,e)};c.prototype.has_opted_out_tracking=function(e){return this._gdpr_call_func(dt,e)};c.prototype.clear_opt_in_out_tracking=function(e){e=n.extend({enable_persistence:!0},e),this._gdpr_call_func(jt,e),this._gdpr_update_persistence(e)};c.prototype.init=c.prototype.init;c.prototype.reset=c.prototype.reset;c.prototype.disable=c.prototype.disable;c.prototype.time_event=c.prototype.time_event;c.prototype.track=c.prototype.track;c.prototype.track_links=c.prototype.track_links;c.prototype.track_forms=c.prototype.track_forms;c.prototype.track_pageview=c.prototype.track_pageview;c.prototype.register=c.prototype.register;c.prototype.register_once=c.prototype.register_once;c.prototype.unregister=c.prototype.unregister;c.prototype.identify=c.prototype.identify;c.prototype.alias=c.prototype.alias;c.prototype.name_tag=c.prototype.name_tag;c.prototype.set_config=c.prototype.set_config;c.prototype.get_config=c.prototype.get_config;c.prototype.get_property=c.prototype.get_property;c.prototype.get_distinct_id=c.prototype.get_distinct_id;c.prototype.toString=c.prototype.toString;c.prototype._check_and_handle_notifications=c.prototype._check_and_handle_notifications;c.prototype._handle_user_decide_check_complete=c.prototype._handle_user_decide_check_complete;c.prototype._show_notification=c.prototype._show_notification;c.prototype.opt_out_tracking=c.prototype.opt_out_tracking;c.prototype.opt_in_tracking=c.prototype.opt_in_tracking;c.prototype.has_opted_out_tracking=c.prototype.has_opted_out_tracking;c.prototype.has_opted_in_tracking=c.prototype.has_opted_in_tracking;c.prototype.clear_opt_in_out_tracking=c.prototype.clear_opt_in_out_tracking;c.prototype.get_group=c.prototype.get_group;c.prototype.set_group=c.prototype.set_group;c.prototype.add_group=c.prototype.add_group;c.prototype.remove_group=c.prototype.remove_group;c.prototype.track_with_groups=c.prototype.track_with_groups;c.prototype.start_batch_senders=c.prototype.start_batch_senders;c.prototype.stop_batch_senders=c.prototype.stop_batch_senders;w.prototype.properties=w.prototype.properties;w.prototype.update_search_keyword=w.prototype.update_search_keyword;w.prototype.update_referrer_info=w.prototype.update_referrer_info;w.prototype.get_cross_subdomain=w.prototype.get_cross_subdomain;w.prototype.clear=w.prototype.clear;n.safewrap_class(c,["identify","_check_and_handle_notifications","_show_notification"]);var ie={},Ai=function(){n.each(ie,function(e,t){t!==R&&(M[t]=e)}),M._=n},Mi=function(){M.init=function(e,t,i){if(i)return M[i]||(M[i]=ie[i]=$e(e,t,i),M[i]._loaded()),M[i];var r=M;ie[R]?r=ie[R]:e&&(r=$e(e,t,R),r._loaded(),ie[R]=r),M=r,et===Ti&&(D[R]=M),Ai()}},Di=function(){function e(){e.done||(e.done=!0,Rt=!0,Pt=!1,n.each(ie,function(r){r._dom_loaded()}))}function t(){try{x.documentElement.doScroll("left")}catch{setTimeout(t,1);return}e()}if(x.addEventListener)x.readyState==="complete"?e():x.addEventListener("DOMContentLoaded",e,!1);else if(x.attachEvent){x.attachEvent("onreadystatechange",e);var i=!1;try{i=D.frameElement===null}catch{}x.documentElement.doScroll&&i&&t()}n.register_event(D,"load",e,!0)};function Pi(){return et=Mt,M=new c,Mi(),M.init(),Di(),M}var Ri=Pi(),qi=Ri;export{qi as default};
