function m(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m=function(e){return typeof e}:m=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(r)}function K(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function J(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,t)}return n}function h(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J(Object(n),!0).forEach(function(t){K(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}var Q="_",fe="function",ce=[];function le(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q;if(!Y(r))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(r.indexOf(e)!==-1)throw new Error(`Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.

`+"The placeholder character that was received is: ".concat(JSON.stringify(e),`

`)+"The mask that was received is: ".concat(JSON.stringify(r)));return r.map(function(n){return n instanceof RegExp?e:n}).join("")}function Y(r){return Array.isArray&&Array.isArray(r)||r instanceof Array}var pe="[]";function ge(r){for(var e=[],n;n=r.indexOf(pe),n!==-1;)e.push(n),r.splice(n,1);return{maskWithoutCaretTraps:r,indexes:e}}var ve=[],g="";function Z(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ve,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!Y(e))if(m(e)===fe)e=e(r,n),e=ge(e).maskWithoutCaretTraps;else throw new Error("Text-mask:conformToMask; The mask property must be an array.");var t=n.guide,a=t===void 0?!0:t,i=n.previousConformedValue,u=i===void 0?g:i,f=n.placeholderChar,o=f===void 0?Q:f,y=n.placeholder,c=y===void 0?le(e,o):y,te=n.currentCaretPosition,N=n.keepCharPositions,E=a===!1&&u!==void 0,C=r.length,$=u.length,U=c.length,ae=e.length,k=C-$,b=k>0,v=te+(b?-k:0),L=v+Math.abs(k);if(N===!0&&!b){for(var D=g,M=v;M<L;M++)c[M]===o&&(D+=o);r=r.slice(0,v)+D+r.slice(v,C)}for(var l=r.split(g).map(function(se,B){return{char:se,isNew:B>=v&&B<L}}),p=C-1;p>=0;p--){var F=l[p].char;if(F!==o){var ie=p>=v&&$===ae;F===c[ie?p-k:p]&&l.splice(p,1)}}var s=g,q=!1;e:for(var d=0;d<U;d++){var H=c[d];if(H===o){if(l.length>0)for(;l.length>0;){var z=l.shift(),O=z.char,ue=z.isNew;if(O===o&&E!==!0){s+=o;continue e}else if(e[d].test(O)){if(N!==!0||ue===!1||u===g||a===!1||!b)s+=O;else{for(var oe=l.length,A=null,x=0;x<oe;x++){var S=l[x];if(S.char!==o&&S.isNew===!1)break;if(S.char===o){A=x;break}}A!==null?(s+=O,l.splice(A,1)):d--}continue e}else q=!0}E===!1&&(s+=c.substr(d,U));break}else s+=H}if(E&&b===!1){for(var V=null,T=0;T<s.length;T++)c[T]===o&&(V=T);V!==null?s=s.substr(0,V+1):s=g}return{conformedValue:s,meta:{someCharsRejected:q}}}var j={__nextCharOptional__:!0},w={"#":/\d/,A:/[a-z]/i,N:/[a-z0-9]/i,"?":j,X:/./},de=function(e){var n=e.lastIndexOf("/");return new RegExp(e.slice(1,n),e.slice(n+1))},me=function(e){return de(e.toString().replace(/.(\/)[gmiyus]{0,6}$/,function(n){return n.replace("/","?/")}))},he=function(e){return"[\\^$.|?*+()".indexOf(e)>-1?"\\".concat(e):e},ye=function(e){return new RegExp("/[".concat(he(e),"]/"))},ke=function(e){return e instanceof RegExp},be=function(e){return ke(e)?e:ye(e)};function _(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w;return r.map(function(n,t,a){var i=e[n]||n,u=a[t-1],f=e[u]||u;return i===j?null:f===j?me(be(i)):i}).filter(Boolean)}function ee(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w;return _(r.split(""),e)}function Oe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,n=r.map(function(t){return t instanceof RegExp?t:typeof t=="string"?t.split(""):null}).filter(Boolean).reduce(function(t,a){return t.concat(a)},[]);return _(n,e)}var xe=function(e,n){var t=document.createEvent("HTMLEvents");t.initEvent(n,!0,!0),e.dispatchEvent(t)},P=function(e){return e instanceof HTMLInputElement?e:e.querySelector("input")||e},re=function(e){return typeof e=="function"},I=function(e){return typeof e=="string"},Te=function(e){return e instanceof RegExp};function Re(){var r=new Map,e={previousValue:"",mask:[]};function n(i){return r.get(i)||h({},e)}function t(i,u){r.set(i,h(h({},n(i)),u))}function a(i){r.delete(i)}return{partiallyUpdate:t,remove:a,get:n}}var R=Re();function we(r){xe(r,"input")}function W(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=r.value,t=R.get(r),a=t.previousValue,i=t.mask,u=n!==a,f=n.length>a.length,o=n&&u&&f;if((e||o)&&i){var y=Z(n,i,{guide:!1}),c=y.conformedValue;r.value=c,we(r)}R.partiallyUpdate(r,{previousValue:n})}function X(r,e,n){var t;Array.isArray(e)?t=Oe(e,n):re(e)?t=e:I(e)&&e.length>0?t=ee(e,n):t=e,R.partiallyUpdate(r,{mask:t})}function Ee(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w;return r===null||Array.isArray(r)||m(r)!=="object"?e:Object.keys(r).reduce(function(n,t){var a=r[t];return a!==null&&!(a instanceof RegExp)?n:h(h({},n),{},K({},t,a))},e)}function G(r){var e=Array.isArray(r)?r:[r],n=e.filter(function(t){return I(t)||Te(t)});return n.toString()}function ne(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ee(r&&r.placeholders);return{bind:function(t,a){var i=a.value;t=P(t),X(t,i,e),W(t)},componentUpdated:function(t,a){var i=a.value,u=a.oldValue;t=P(t);var f=re(i)||G(u)!==G(i);f&&X(t,i,e),W(t,f)},unbind:function(t){t=P(t),R.remove(t)}}}var Me=ne(),Ce=function(r,e){var n=ee(e);if(!I(r)&&!Number.isFinite(r))return r;var t=Z("".concat(r),n,{guide:!1}),a=t.conformedValue;return a},Ae=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.directive("mask",ne(e)),r.filter("VMask",Ce)};export{Me as VueMaskDirective,Ce as VueMaskFilter,Ae as VueMaskPlugin,Ae as default};
