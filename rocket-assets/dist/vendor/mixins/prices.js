import{mapGetters as y}from"../vuex.js";import{prices as g,utms as x}from"../index3.js";import b from"./cache.js";import"../vue.esm.js";import"../get.js";import"../_commonjsHelpers.js";import"../isEmpty.js";import"../index.js";import"../modules/axios/api.js";import"../base.js";import"../axios.js";import"../modules/axios/rocket.js";import"../lodash2.js";const D={mixins:[b],data(){return{productPrices:null,productPricesParams:null,loadingPrices:!0,pricesHasError:!1}},mounted(){this.productPricesParams={product_id:this.product.content.id}},watch:{async productPricesParams(t){if(!!g)try{this.loadingPrices=!0;const i=window.merchant.checkout.default_card,e=t.product_id,r=`_${Object.values(x).join("_")}`,s=`prices_${i}${r}`,o=this.getLocalStorageCache({itemId:e,itemAlias:s});if(o!=null&&o.data){this.productPrices=o.data,this.loadingPrices=!1;return}const{data:c}=await g.get("",{params:t});this.setLocalStorageCache({itemId:e,data:c,itemAlias:s}),this.productPrices=c.data}catch{this.pricesHasError=!0}finally{this.loadingPrices=!1}}},computed:{...y("merchant",["merchant"]),selectedPrice(){var r,s,o,c,p,a,n,m,h,l,d,u,f,_,P;const t=((r=this.themeStyle)==null?void 0:r.highlight_type_payment)||"promotional";let i="",e="";return t==="pix"?(i=(c=(o=(s=this.productPrices)==null?void 0:s.payment_methods)==null?void 0:o.pix)==null?void 0:c.price_formated.split(",")[0],e=(n=(a=(p=this.productPrices)==null?void 0:p.payment_methods)==null?void 0:a.pix)==null?void 0:n.price_formated.split(",")[1]):t==="billet"?(i=(l=(h=(m=this.productPrices)==null?void 0:m.payment_methods)==null?void 0:h.billet)==null?void 0:l.price_formated.split(",")[0],e=(f=(u=(d=this.productPrices)==null?void 0:d.payment_methods)==null?void 0:u.billet)==null?void 0:f.price_formated.split(",")[1]):(i=(_=this.productPrices)==null?void 0:_.price_formated.split(",")[0],e=(P=this.productPrices)==null?void 0:P.price_formated.split(",")[1]),i&&e!==void 0?`${i},<span class="fraction-amount">${e}</span>`:""},priceText(){var i;const t=((i=this.themeStyle)==null?void 0:i.highlight_type_payment)||"promotional";return t==="pix"?"no Pix":t==="billet"?"no boleto":""},hasPrice(){var i,e,r;const t=((i=this.themeStyle)==null?void 0:i.highlight_type_payment)||"promotional";return t==="promotional"?!1:!!((r=(e=this.productPrices)==null?void 0:e.payment_methods[t])!=null&&r.price)},hasPromotion(){var t;return!!((t=this.productPrices)!=null&&t.has_promotion)},percentDiscount(){var t;return((t=this.productPrices)==null?void 0:t.percent_discount)||0}}};export{D as default};
