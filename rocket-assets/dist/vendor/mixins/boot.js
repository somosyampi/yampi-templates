import{mapGetters as r}from"../vuex.js";const d={computed:{...r("preview",["isPreview"])},mounted(){this.$store.dispatch("queryParams/load"),this.$store.dispatch("pixels/load"),this.$store.dispatch("preview/load"),window.addEventListener("load",e=>{const i=new URLSearchParams(window.location.search),s=i.get("section");i.get("preview")&&s&&Promise.all(Array.from(document.images).filter(t=>!t.complete).map(t=>new Promise(o=>{t.onload=t.onerror=o}))).then(()=>{setTimeout(()=>{this.$store.dispatch("preview/focusOnSection",s)},500)})}),this.isPreview&&window.addEventListener("message",e=>{if(e.data==="clean-sections"){this.$store.dispatch("preview/setActiveSection",null);return}if(typeof e.data=="string"){this.$store.dispatch("preview/setActiveSection",e.data),this.$store.dispatch("preview/focusOnSection",e.data);return}this.$store.dispatch("preview/updateParams",e.data)})}};export{d as default};
