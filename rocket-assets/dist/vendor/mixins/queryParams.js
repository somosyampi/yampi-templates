import{mapGetters as r,mapActions as a}from"../vuex.js";import s from"../modules/SearchAttributesHandler.js";const n={data:()=>({mainQueryString:""}),computed:{...r("queryParams",["queryParams"]),...r("preview",["isIframe"]),shouldUseNewSearchStrategy(){const{new_search:e}=this.$store.getters["merchant/storeModules"];return e}},methods:{...a("filters",["addActiveFilter","removeActiveFilter","bootQueryParams"]),...a("queryParams",["setQueryParams","removeQueryParams"]),updateFilterAttributes({filterData:e,allActiveFilters:t}){t.length||this.removeQueryParams({attributes:null,page:1,key:"attributes"}),this.checkFilterStatus(e),this.setQueryParams({page:1,attributes:s.arrayToString(t)})},updateFilterStatus(e,t){this.isIframe||(e.active=t,this.checkFilterStatus(e),this.setQueryParams({[this.mainQueryString]:e.id,page:1}))},parseFilterStatuses(e){e.forEach(t=>this.checkFilterStatus(t,!1))},parseAttributes(e){return e===void 0||!e?[]:s.stringToArray(decodeURIComponent(e))},checkFilterStatus(e,t=!0){if(!e.active&&!t)return;const i=e.active?"addActiveFilter":"removeActiveFilter";this[i]({id:e.id,key:this.mainQueryString,query:{[this.mainQueryString]:e.id},alias:`${this.mainQueryString}-${e.id}`,name:e.name})}}};export{n as default};
